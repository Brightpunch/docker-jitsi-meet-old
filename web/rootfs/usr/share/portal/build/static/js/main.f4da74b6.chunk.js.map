{"version":3,"sources":["utils/meeting.js","utils/storage.js","axios/axiosHelpers.js","auth/use-auth.js","ui/Sidebar.js","ui/Topbar.js","utils/slug.js","utils/query.js","components/Button.js","components/UserForm.js","components/UserList.js","utils/hooks.js","components/Profile.js","components/MeetingStartStopButton.js","utils/datetime.js","components/MeetingsTable.js","components/Meetings.js","components/MeetingsForm.js","components/MeetingsPage.js","utils/l18n.js","components/MeetingRedirect.js","components/MeetingDetails.js","i18n/const.js","i18n/messages.de.js","i18n/messages.en.js","i18n/messages.fr.js","i18n/use-i18n.js","auth/Login.js","utils/base64.js","auth/LoginCallback.js","auth/Signout.js","App.js","reportWebVitals.js","index.js","App.module.scss","utils/window.js"],"names":["M_NOT_STARTED","M_ONGOING","M_ENDED","meetingStatus","m","realStartDateTime","realEndDateTime","module","exports","MEETINGSTATUSES","meetingHasStarted","meetingHasNotStarted","meetingHasEnded","iAmModerator","meeting","auth","moderator","user","userId","local","storageFactory","localStorage","API_SERVER","process","ERROR_NO_ACCESSTOKEN","refreshTokenAxios","axios","create","baseURL","refreshAccessToken","a","refreshToken","storage","getItem","get","data","access_token","setItem","removeItem","authedAxios","interceptors","request","use","config","accessToken","headers","Promise","reject","error","response","originalRequest","status","_retry","anonAxios","authContext","createContext","ProvideAuth","children","useState","setUser","setAccessToken","setRefreshToken","updateUser","cb","JSON","parse","signin","code","state","statusText","console","log","refresh_token","userData","statusUser","stringify","errMsg","message","alert","signout","window","location","href","useProvideAuth","Provider","value","useAuth","context","useContext","Error","Sidebar","props","className","roles","includes","to","Topbar","serverUrl","URL","pathname","PORTAL_BASE_URL","CUID_REG_STR","createSlugUrl","RegExp","slug","createSlugUrlForGuests","goToMeeting","guestName","encodeURIComponent","url","roomName","jwt","opened","openTab","undefined","callMeetingBySlug","callMeetingParticipants","meetingId","meetingParticipants","post","participantIds","callMeetingModerator","moderatorId","asGuest","callCreateMeeting","callStartMeeting","id","put","_id","callStopMeeting","callDeleteMeeting","delete","callAddParticipantToMeeting","participantId","callGetUser","callUpdateUser","email","username","fullName","callGetPreviousUsersPage","pageKey","perPage","searchText","callGetNextUsersPage","callUpsertUser","callDeleteUser","Button","colour","text","additionalClass","type","disabled","onClick","errorClass","e","t","f","UserForm","initialUser","afterSubmit","mutateError","setMutateError","useMutation","onSuccess","_","queryCache","refetchQueries","onError","err","mutate","doSubmit","setSubmitting","deleteMutation","handleDelete","initialValues","validate","values","errors","length","onSubmit","touched","isSubmitting","name","placeholder","render","msg","UserList","useMessageGetter","setSearchText","debouncedSearchText","delay","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","useDebounce","setPageKey","firstId","setFirstId","lastId","setLastId","pageData","setPageData","fetchError","setFetchError","addUser","setAddUser","editUser","setEditUser","useQuery","next","previous","keepPreviousData","items","isFetching","isLoading","updateSearchText","s","htmlFor","style","width","onChange","target","map","Fragment","sort","r","Profile","userError","setUserError","setMessage","userEditError","setUserEditError","newData","enableReinitialize","test","resetForm","clear","MeetingStartStopButton","queryKeys","startMeeting","stopMeeting","optional","v","unit","formatMeetingDuration","splitDate","d","year","month","week","day","hour","minute","second","Object","keys","forEach","key","Math","floor","dateSplit","duration","MeetingsTable","jitsiTabUrl","setJitsiTabUrl","jitsiError","setJitsiError","handleGotoMeetingButton","tabOpened","result","topic","scheduled","startDateTime","real","format","parseISO","Meetings","jwtExpired","setJwtExpired","fetchMeetings","b","isAfter","refetchInterval","isError","responseDataMessageArray","ownMeetings","filter","otherMeetings","MeetingsForm","initialMeeting","showDeleteButton","startDate","startTime","endDate","endTime","isGuestsAllowed","description","Date","endDateTime","component","rows","MeetingsPage","addMeeting","setAddMeeting","formatDateTime","DEFAULT_GUEST_NAME","MeetingRedirect","guestRoute","useParams","setMeeting","tryCounter","setTryCounter","redirected","setRedirected","addedAsParticipant","setAddedAsParticipant","moderatorDetails","setModeratorDetails","setGuestName","accessAsGuest","enabled","addParticipant","updateParticipantList","checked","MeetingDetails","history","useHistory","editMeeting","setEditMeeting","participantDetails","setParticipantDetails","participants","goBack","deleteMeeting","p","LANG_EN_GB","LANG_EN_US","LANG_DEFAULT","options","label","defaultOption","find","o","application","login","info","DEEPLINK","welcome","BRANDING","messages","meetingDetails","addMeetingButton","editButton","cancelButton","profile","editUserButton","emailChanged","userList","addUserButton","clearSearch","I18nStateContext","I18nDispatchContext","BROWSER_LANGUAGE","navigator","languages","language","userLanguage","langs","i18nReducer","lang","messages_de","messages_en","messages_fr","defaultState","I18nProvider","useReducer","dispatch","Login","useLocation","i18nDispatch","React","useI18nDispatch","from","deepLink","str","utf8Bytes","replace","match","p1","String","fromCharCode","btoa","base64EncodeUnicode","authUrl","defaultValue","languageOptions","LoginCallback","query","URLSearchParams","search","percentEncodedStr","atob","split","c","charCodeAt","toString","slice","join","decodeURIComponent","base64DecodeUnicode","AuthButton","logoutUrl","App","Signout","styles","Content","path","exact","routeProps","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","Consumer","i18n","basename","document","getElementById","slugUrl","win","open","focus","remoteUrl","addEventListener","event","origin","intervalId","setInterval","postMessage","clearInterval"],"mappings":"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","file":"static/js/main.f4da74b6.chunk.js","sourcesContent":["const MEETINGSTATUSES = {\n  M_NOT_STARTED: \"Meeting has not started yet\",\n  M_ONGOING: \"Meeting is ongoing\",\n  M_ENDED: \"Meeting has ended\"\n};\nconst M_NOT_STARTED = \"M_NOT_STARTED\";\nconst M_ONGOING = \"M_ONGOING\";\nconst M_ENDED = \"M_ENDED\";\n\nconst meetingStatus = m => {\n  if (!m.realStartDateTime && !m.realEndDateTime) {\n    return M_NOT_STARTED;\n  } else if (!!m.realStartDateTime && !m.realEndDateTime) {\n    return M_ONGOING;\n  } else if (!!m.realStartDateTime && !!m.realEndDateTime) {\n    return M_ENDED;\n  }\n};\n\nconst meetingHasStarted = m => meetingStatus(m) === M_ONGOING;\nconst meetingHasNotStarted = m => meetingStatus(m) === M_NOT_STARTED;\nconst meetingHasEnded = m => meetingStatus(m) === M_ENDED;\n\nconst iAmModerator = (meeting, auth) =>\n  (meeting || {}).moderator &&\n  meeting.moderator === ((auth || {}).user || {}).userId;\n\nmodule.exports = {\n  MEETINGSTATUSES,\n  meetingStatus,\n  meetingHasStarted,\n  meetingHasNotStarted,\n  meetingHasEnded,\n  iAmModerator\n};\n","import { storageFactory } from \"storage-factory\";\n\nexport const local = storageFactory(() => localStorage);\n\n// const getAccessToken = _ => local.getItem(\"accessToken\");\n// const getRefreshToken = _ => local.getItem(\"refreshToken\");\n\n// const setAccessToken = t => local.setItem(\"accessToken\", t);\n// const setRefreshToken = t => local.setItem(\"refreshToken\", t);\n\n// const removeAccessToken = local.removeItem(\"accessToken\");\n// const removeRefreshToken = local.removeItem(\"refreshToken\");\n\n// module.exports = {\n//   local,\n//   getAccessToken,\n//   getRefreshToken,\n//   setAccessToken,\n//   setRefreshToken,\n//   removeAccessToken,\n//   removeRefreshToken\n// }\n\n","import axios from \"axios\";\nimport * as storage from \"../utils/storage\";\n\nconst API_SERVER = process.env.REACT_APP_API_SERVER;\n\nconst ERROR_NO_ACCESSTOKEN = \"ERROR_NO_ACCESSTOKEN\";\n\n/**\n * Private axios instance without interceptor.\n * Necessary so an expired refresh_token won't cause\n * refreshAccessToken() to be called again, causing an\n * endless loop.\n */\nconst refreshTokenAxios = axios.create({\n  baseURL: API_SERVER\n});\n\n/**\n * Get new access_token with refresh_token or log out user if refresh_token has\n * expired as well.\n */\nconst refreshAccessToken = async () => {\n  const refreshToken = storage.local.getItem(\"refreshToken\");\n  try {\n    const { data } = await refreshTokenAxios.get(\n      `/api/auth/access_token?refresh_token=${refreshToken}`\n    );\n    if (data.access_token) {\n      storage.local.setItem(\"accessToken\", data.access_token);\n      return data.access_token;\n    }\n  } catch (error) {\n    storage.local.removeItem(\"accessToken\");\n    storage.local.removeItem(\"refreshToken\");\n  }\n};\n\n/**\n * Axios instance with access_token header for routes that need authentication.\n */\nconst authedAxios = axios.create({\n  baseURL: API_SERVER\n});\n\n/**\n * Inject current access_token into request.\n */\nauthedAxios.interceptors.request.use(\n  config => {\n    const accessToken = storage.local.getItem(\"accessToken\");\n    if (accessToken) {\n      config.headers.access_token = accessToken;\n      return config;\n    } else {\n      return Promise.reject(ERROR_NO_ACCESSTOKEN);\n    }\n  },\n  error => {\n    return Promise.reject(error);\n  }\n);\n\n/**\n * Intercept query for status 401 errors, which means that the JWT is\n * expired; use the refresh token to acquire a new access token and\n * retry the original query again.\n */\nauthedAxios.interceptors.response.use(\n  response => {\n    return response;\n  },\n  async function (error) {\n    const originalRequest = error.config;\n    if ((error.response || {}).status === 401 && !originalRequest._retry) {\n      // JWT expired, get new access_token with refresh_token and retry original request\n      originalRequest._retry = true;\n      const access_token = await refreshAccessToken();\n      if (access_token) {\n        return authedAxios(originalRequest);\n      }\n    }\n    return Promise.reject(error);\n  }\n);\n\n/**\n * Axios instance without access_token header.\n */\nconst anonAxios = axios.create({\n  baseURL: API_SERVER\n});\n\nexport { API_SERVER, authedAxios, anonAxios, refreshAccessToken, ERROR_NO_ACCESSTOKEN };\n","import React, { createContext, useContext, useState } from \"react\";\nimport { API_SERVER, authedAxios, anonAxios } from \"../axios/axiosHelpers.js\";\nimport * as storage from \"../utils/storage\";\n\nconst authContext = createContext();\n\n// Provider component that wraps your app and makes auth object ...\n// ... available to any child component that calls useAuth().\n\nexport const ProvideAuth = ({ children }) => {\n  const auth = useProvideAuth();\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>;\n};\n\n// Hook for child components to get the auth object ...\n// ... and re-render when it changes.\nexport const useAuth = () => {\n  const context = useContext(authContext);\n  if (!context) {\n    throw new Error(`useAuth must be used within a ProvideAuth`);\n  }\n  return context;\n};\n\n// Provider hook that creates auth object and handles state\nfunction useProvideAuth() {\n  const [user, setUser] = useState(null);\n  const [accessToken, setAccessToken] = useState(null);\n  const [refreshToken, setRefreshToken] = useState(null);\n\n  const updateUser = async (cb) => {\n    const user = JSON.parse(storage.local.getItem(\"user\"));\n    const refreshToken = storage.local.getItem(\"refreshToken\");\n    if (user) {\n      setUser(user);\n    }\n    if (refreshToken){\n      setRefreshToken(refreshToken);\n    }\n\n    cb && cb();\n  };\n\n  const signin = async ({ code, state }, cb) => {\n    try {\n      if (!code) {\n        return cb(state);\n      }\n      // get JWT\n      const { data, status, statusText } = await anonAxios.get(\n        `/api/auth/access_token?code=${code}`\n      );\n\n      if (status >= 400) {\n        console.log(\"Error getting access_token:\", status, statusText);\n        return;\n      }\n\n      setAccessToken(data.access_token);\n      storage.local.setItem(\"accessToken\", data.access_token);\n      setRefreshToken(data.refresh_token);\n      storage.local.setItem(\"refreshToken\", data.refresh_token);\n\n      // exchange access_token for user object\n      const { data: userData, status: statusUser } = await authedAxios.get(\n        \"/api/user\"\n      );\n      if (statusUser >= 400) {\n        console.log(\"Error getting user data:\", statusUser);\n        return;\n      }\n      setUser(userData);\n      storage.local.setItem(\"user\", JSON.stringify(userData));\n    } catch (err) {\n      let errMsg;\n      if (err.response) {\n        const { status } = err.response;\n        console.log(\"Axios: error=\", JSON.stringify(err.response));\n        errMsg =\n          (status ? `status=${status}; ` : \"\") +\n          (err.response.data || {}).message;\n      } else if (err.request) {\n        console.log(\"Axios: no response\");\n        errMsg = \"no response\";\n      } else {\n        console.log(\"other Axios error:\", err);\n        errMsg = \"other error\";\n      }\n      console.log(\"errMsg:\", errMsg);\n      // TODO: show Toast instead of alert()\n      errMsg && alert(errMsg);\n      // be safe and sign out in case login has happened but user\n      // was not registered to app\n      signout(cb);\n    }\n\n    cb && cb(state);\n  };\n\n  const signout = cb => {\n    console.log(\"signout called\");\n    setUser(null);\n    storage.local.removeItem(\"user\");\n    storage.local.removeItem(\"accessToken\");\n    storage.local.removeItem(\"refreshToken\");\n    window.location.href = `${API_SERVER}/api/auth/logout`;\n    cb && cb();\n  };\n\n  return { user, signin, signout, updateUser, accessToken, refreshToken };\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useAuth } from \"../auth/use-auth.js\";\n\nconst Sidebar = props => {\n  let auth = useAuth();\n\n  return (\n    <div className=\"bg-blue-500 border border-blue-200 relative h-full min-h-screen\">\n      <nav>\n        {auth.user.roles.includes(\"admin\") && (\n          <div className=\"relative sidebar-item with-children\">\n            <div className=\"text-white text-s\">\n              <Link\n                className=\"block text-center x shadow-light x py-6 border-transparent hover:bg-blue-900\"\n                to=\"/user-list\"\n              >\n                Users\n              </Link>\n            </div>\n          </div>\n        )}\n\n        <div className=\"relative sidebar-item with-children\">\n          <div className=\"text-white text-s\">\n            <Link\n              className=\"block text-center x shadow-light x py-6 border-transparent hover:bg-blue-900\"\n              to=\"/profile\"\n            >\n              Profile\n            </Link>\n          </div>\n        </div>\n\n        <div className=\"relative sidebar-item with-children\">\n          <div className=\"text-white text-s\">\n            <Link\n              className=\"block text-center x shadow-light x py-6 border-transparent hover:bg-blue-900\"\n              to=\"/meetings\"\n            >\n              Meetings\n            </Link>\n          </div>\n        </div>\n      </nav>\n    </div>\n  );\n};\n\nexport default Sidebar;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst Topbar = props => (\n  <>\n    <div className=\"bg-blue-500 w-full flex flex-col items-center justify-between\">\n      <div className=\"w-full relative with-children\">\n        <div className=\"text-white text-s\">\n          <Link\n            className=\"block xl:flex xl:items-center text-center xl:text-left shadow-light xl:shadow-none py-6 xl:py-2 xl:px-4 border-l-4 border-transparent hover:bg-blue-900\"\n            to=\"/profile\"\n          >\n            Profile\n          </Link>\n        </div>\n      </div>\n\n      <div className=\"w-full relative with-children\">\n        <div className=\"text-white text-s\">\n          <Link\n            className=\"block xl:flex xl:items-center text-center xl:text-left shadow-light xl:shadow-none py-6 xl:py-2 xl:px-4 border-l-4 border-transparent hover:bg-blue-900\"\n            to=\"/meetings\"\n          >\n            Meetings\n          </Link>\n        </div>\n      </div>\n    </div>\n  </>\n);\n\nexport default Topbar;\n","// URL prefix to use with direct internal links\nlet serverUrl = new URL(process.env.REACT_APP_PORTAL || \"http://localhost\");\nserverUrl.pathname = process.env.REACT_APP_BASENAME;\nconst PORTAL_BASE_URL = serverUrl;\n  \n\n// regular expressions to match cuid IDs (https://github.com/ericelliott/cuid)\nexport const CUID_REG_STR = \"c[a-z0-9]{24}\"; // ckhz90ali0003p7pvhhre44cg\n\n// RegExp object:\nexport const CUID_REGEXP = new RegExp(CUID_REG_STR);\n\n// utility function to check RegExp\nexport const checkSlug = slug => CUID_REGEXP.exec(slug);\n\nexport const createSlugUrl = slug => `${PORTAL_BASE_URL.href}m/${slug}`;\nexport const createSlugUrlForGuests = slug =>\n  `${PORTAL_BASE_URL}m/${slug}/guest`;\n","import { anonAxios, authedAxios } from \"../axios/axiosHelpers.js\";\nimport { openTab } from \"../utils/window.js\";\nimport { createSlugUrl } from \"../utils/slug.js\";\n\nconst JITSI_SERVER = process.env.REACT_APP_JITSI_SERVER;\n\n/*\n * Fetches the real meeting room name and opens its URL in a new tab.\n * Calls callback with whether tab could be opened and the URL.\n */\nexport const goToMeeting = async (slug, guestName, cb) => {\n  try {\n    const { data, status, statusText } = guestName\n      ? await anonAxios.get(\n          `${\"/api/meetings/room/byslug/\"}${slug}?name=${encodeURIComponent(\n            guestName\n          )}`\n        )\n      : await authedAxios.get(`${\"/api/meetings/room/byslug/\"}${slug}`);\n    if (status < 400) {\n      const url = `${JITSI_SERVER}/${encodeURIComponent(data.roomName)}?jwt=${\n        data.jwt\n      }`;\n      const opened = openTab(url, data.roomName, createSlugUrl(slug));\n      cb && cb(opened, url);\n\n      return undefined;\n    } else {\n      return `${status}: ${statusText}`;\n    }\n  } catch (err) {\n    if (err.response) {\n      const { data, status } = err.response;\n      console.log(\"Axios: error=\", err.response);\n      return (\n        (status ? `status=${status}; ` : \"\") +\n        ((data || {}).error || {}).message\n      );\n    } else if (err.request) {\n      console.log(\"Axios: no response\");\n      return \"no response\";\n    } else {\n      console.log(\"other Axios error\");\n      return \"other error\";\n    }\n  }\n};\n\n/**\n * Get Meeting details through its slug.\n */\nexport const callMeetingBySlug = async ({ slug }) =>\n  await authedAxios.get(`/api/meetings/byslug/${slug}`);\n\n/**\n * Get meeting's participants' infos.\n */\nexport const callMeetingParticipants = async ({\n  meetingId,\n  meetingParticipants\n}) =>\n  authedAxios.post(`/api/user/participantInfos/${meetingId}`, {\n    participantIds: meetingParticipants\n  });\n\n/**\n * Get meeting's moderator info.\n */\nexport const callMeetingModerator = async ({\n  meetingId,\n  moderatorId,\n  asGuest\n}) =>\n  asGuest\n    ? await anonAxios.post(`/api/meetings/${meetingId}/moderator`, {\n        moderatorId\n      })\n    : await authedAxios.post(`/api/meetings/${meetingId}/moderator`, {\n        moderatorId\n      });\n\n/**\n * Create a meeting.\n */\nexport const callCreateMeeting = async meeting =>\n  await authedAxios.post(\"/api/meetings\", {\n    ...meeting\n  });\n\n/**\n * Start a meeting by its ID.\n */\nexport const callStartMeeting = async ({ id }) =>\n  await authedAxios.put(`/api/meetings/${id}/start`, { _id: id });\n\n/**\n * Stops a meeting by its ID.\n */\nexport const callStopMeeting = async ({ id }) =>\n  await authedAxios.put(`/api/meetings/${id}/stop`, { _id: id });\n\nexport const callDeleteMeeting = async ({ id }) =>\n  await authedAxios.delete(`/api/meetings/${id}`);\n\nexport const callAddParticipantToMeeting = async ({\n  meetingId,\n  participantId\n}) =>\n  await authedAxios.post(`/api/meetings/${meetingId}/participants`, {\n    participantId\n  });\n\n/**\n * Get single user by ID\n */\nexport const callGetUser = async ({ id }) =>\n  await authedAxios.get(`/api/user/byid/${id}`);\n\n/**\n * Update single user by ID\n */\nexport const callUpdateUser = async ({ userId, email, username, fullName }) =>\n  await authedAxios.put(`/api/user/${userId}`, {\n    _id: userId,\n    email,\n    username,\n    fullName\n  });\n\n/**\n * Get page of users.\n */\nexport const callGetPreviousUsersPage = async ({\n  pageKey,\n  perPage = 25,\n  searchText = \"\"\n}) =>\n  await authedAxios.get(\n    `/api/user/list?${pageKey ? `&previous=${pageKey}` : \"\"}${\n      perPage ? `&per_page=${perPage}` : \"\"\n    }&search=${searchText}`\n  );\n\nexport const callGetNextUsersPage = async ({\n  pageKey,\n  perPage = 25,\n  searchText = \"\"\n}) =>\n  await authedAxios.get(\n    `/api/user/list?${pageKey ? `next=${pageKey}` : \"\"}${\n      perPage ? `&per_page=${perPage}` : \"\"\n    }&search=${searchText}`\n  );\n\n/**\n * Create a new user\n */\nexport const callUpsertUser = async user =>\n  user._id\n    ? await authedAxios.put(`/api/user/${user._id}`, {\n        ...user\n      })\n    : await authedAxios.post(\"/api/user/new\", {\n        ...user\n      });\n\nexport const callDeleteUser = async ({ _id }) =>\n  await authedAxios.delete(`/api/user/${_id}`);\n","import React from \"react\";\n\nconst Button = ({\n  id,\n  colour,\n  text,\n  additionalClass = \"\",\n  type=\"button\",\n  disabled,\n  children,\n  onClick\n}) => (\n  <button\n    id={id}\n    className={`p-4 uppercase bg ${\n      colour\n        ? `bg-${colour}-400 ${!disabled ? `hover:bg-${colour}-600` : \"\"}`\n        : \"\"\n    } ${\n      disabled ? \"opacity-25 cursor-not-allowed\" : \"\"\n    } w-max rounded-md ${additionalClass}`}\n    onClick={onClick}\n    type={type}\n    disabled={disabled}\n  >\n    {text}\n    {children}\n  </button>\n);\n\nexport default Button;\n","import React, { useState } from \"react\";\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\nimport { useMutation, queryCache } from \"react-query\";\nimport { callUpsertUser, callDeleteUser } from \"../utils/query.js\";\nimport Button from \"./Button.js\";\n\nconst errorClass = (e, t, f) => (e[f] && t[f] ? \"border-2 border-red-400\" : \"\");\n\nconst UserForm = ({ initialUser = {}, afterSubmit }) => {\n  const [mutateError, setMutateError] = useState();\n\n  const [mutate, { error }] = useMutation(callUpsertUser, {\n    onSuccess: _ => {\n      queryCache.refetchQueries([\"users\"]);\n      setMutateError(null);\n      afterSubmit && afterSubmit();\n    },\n    onError: err => {\n      setMutateError(err.response.data);\n      console.log(\"onError: \", err.response.data);\n    }\n  });\n\n  const doSubmit = async (\n    { _id, username, email, fullName },\n    { setSubmitting }\n  ) => {\n    try {\n      await mutate({\n        _id,\n        username,\n        email,\n        fullName\n      });\n      setSubmitting(false);\n    } catch (error) {\n      console.log(\"mutation error:\", error);\n    }\n  };\n\n  const [deleteMutation] = useMutation(callDeleteUser, {\n    onSuccess: _ => {\n      queryCache.refetchQueries([\"users\"]);\n      setMutateError(null);\n      afterSubmit && afterSubmit();\n    },\n    onError: err => {\n      setMutateError(err.response.data);\n      console.log(\"delete onError: \", err.response.data);\n    }\n  });\n\n  const handleDelete = async _id => {\n    try {\n      await deleteMutation({ _id });\n    } catch (error) {\n      console.log(\"delete error:\", error);\n    }\n  };\n\n  return (\n    <div className=\"m-4 p-4 rounded border border-2 md:w-5/6 lg:w-2/3 max-w-prose\">\n      <Formik\n        initialValues={{\n          _id: initialUser._id,\n          username: initialUser.username || \"\",\n          email: initialUser.email || \"\",\n          fullName: initialUser.fullName || \"\"\n        }}\n        validate={values => {\n          const errors = {};\n          if (!values.email || !values.email.length > 3)\n            errors.email = \"Required\";\n          if (values.fullName && values.fullName.length > 30)\n            errors.fullName = \"Max 30 characters\";\n          return errors;\n        }}\n        onSubmit={doSubmit}\n      >\n        {({ values, errors, touched, isSubmitting }) => (\n          <Form>\n            <div className=\"mb-4 grid grid-cols-1 md:grid-cols-4\">\n              <div className=\"\">User name&nbsp;</div>\n              <Field\n                className={`md:col-span-3 bg bg-yellow-200 rounded p-2 ${errorClass(\n                  errors,\n                  touched,\n                  \"username\"\n                )}`}\n                type=\"text\"\n                name=\"username\"\n                placeholder=\"User name\"\n              />\n              <div />\n              <ErrorMessage\n                name=\"username\"\n                render={msg => <div className=\"text-red-400\">{msg}</div>}\n              />\n            </div>\n\n            <div className=\"mb-4 grid grid-cols-1 md:grid-cols-4\">\n              <div className=\"\">E-mail&nbsp;</div>\n              <Field\n                className={`md:col-span-3 bg bg-yellow-200 rounded p-2 ${errorClass(\n                  errors,\n                  touched,\n                  \"email\"\n                )}`}\n                type=\"text\"\n                name=\"email\"\n                placeholder=\"E-mail\"\n              />\n              <div />\n              <ErrorMessage\n                name=\"email\"\n                render={msg => <div className=\"text-red-400\">{msg}</div>}\n              />\n            </div>\n\n            <div className=\"mb-4 grid grid-cols-1 md:grid-cols-4\">\n              <div className=\"\">Full name&nbsp;</div>\n              <Field\n                className={`md:col-span-3 bg bg-yellow-200 rounded p-2 ${errorClass(\n                  errors,\n                  touched,\n                  \"fullName\"\n                )}`}\n                type=\"text\"\n                name=\"fullName\"\n                placeholder=\"Full name\"\n              />\n              <div />\n              <ErrorMessage\n                name=\"fullName\"\n                render={msg => <div className=\"text-red-400\">{msg}</div>}\n              />\n            </div>\n\n            {/* Buttons */}\n            <div className=\"flex justify-between flex-row flex-wrap\">\n              <div className=\"p-2\">\n                <Button colour=\"green\" disabled={isSubmitting} type=\"submit\">\n                  Submit\n                </Button>\n              </div>\n              <div className=\"p-2\">\n                <Button\n                  colour=\"red\"\n                  additionalClass=\"flex items-center\"\n                  onClick={afterSubmit}\n                >\n                  <i className=\"far fa-window-close text-xl\"></i>\n                  <span>&nbsp; Cancel</span>\n                </Button>\n              </div>\n              <div className=\"p-2\">\n                <Button\n                  colour=\"red\"\n                  additionalClass=\"flex items-center\"\n                  onClick={_ => handleDelete(values._id)}\n                >\n                  <i className=\"far fa-trash-alt text-xl\"></i>\n                  <span>&nbsp; Delete</span>\n                </Button>\n              </div>\n            </div>\n\n            {(mutateError || error) && (\n              <div className=\"text-red-400\">\n                {(mutateError || error).message}\n              </div>\n            )}\n          </Form>\n        )}\n      </Formik>\n    </div>\n  );\n};\n\nexport default UserForm;\n","import React, { useState } from \"react\";\nimport { useQuery, queryCache } from \"react-query\";\nimport {\n  callGetNextUsersPage,\n  callGetPreviousUsersPage\n} from \"../utils/query.js\";\nimport { useMessageGetter } from \"@messageformat/react\";\nimport Button from \"./Button.js\";\nimport UserForm from \"./UserForm.js\";\nimport { useDebounce } from \"../utils/hooks.js\";\n\nconst UserList = () => {\n  const m = useMessageGetter(\"userList\");\n  const [searchText, setSearchText] = useState(\"\");\n  const debouncedSearchText = useDebounce(searchText, 500);\n  // key to fetch page for, either \"next\" or \"previous\"\n  const [pageKey, setPageKey] = useState({});\n  // overall first ID to know when no previous page will be available\n  const [firstId, setFirstId] = useState();\n  // overall last ID to know when no next page will be available\n  const [lastId, setLastId] = useState();\n  // the actual data: pageData.items[]\n  const [pageData, setPageData] = useState();\n  const [fetchError, setFetchError] = useState();\n  const [addUser, setAddUser] = useState(false);\n  const [editUser, setEditUser] = useState(false);\n\n  const { isFetching, isLoading } = useQuery(\n    [\"users\", pageKey.next, pageKey.previous, debouncedSearchText],\n    async (_, next, previous, searchText) => {\n      return next\n        ? await callGetNextUsersPage({ pageKey: next, searchText })\n        : await callGetPreviousUsersPage({ pageKey: previous, searchText });\n    },\n    {\n      keepPreviousData: true,\n      onSuccess: ({ data }) => {\n        if (searchText || data.items.length) {\n          setPageData(data);\n        }\n        setFetchError(null);\n        if (data.items.length) {\n          if (!firstId) setFirstId(data.previous);\n        } else if (!lastId) {\n          setLastId(pageKey.next);\n        }\n      },\n      onError: err => {\n        const message = (\n          ((err.response || {}).data || {}).error ||\n          (err.response || {}).data ||\n          {}\n        ).message;\n        if (message) {\n          setFetchError(message);\n        } else setFetchError(err);\n      }\n    }\n  );\n\n  const updateSearchText = s => {\n    setFirstId(null);\n    setLastId(null);\n    setSearchText(s);\n    setPageKey({});\n  };\n\n  return (\n    <>\n      {addUser ? (\n        <UserForm afterSubmit={_ => setAddUser(false)} />\n      ) : (\n        <div className=\"mt-4 mb-4 p-4 flex\">\n          <div className=\"ml-auto\">\n            <label htmlFor=\"addUser\"></label>\n            <Button\n              id=\"addUser\"\n              colour=\"white\"\n              onClick={_ => setAddUser(true)}\n              additionalClass=\"p-4 border-2 rounded-md hover:bg-gray-100 flex items-center\"\n            >\n              <i className=\"far fa-plus-square text-xl\"></i>&nbsp;\n              {m(\"addUserButton\", \"add\")}\n            </Button>\n          </div>\n        </div>\n      )}\n\n      {pageData && (\n        <div style={{ width: \"max-content\" }}>\n          <div className=\"m-4 flex rounded border border-width-2\">\n            <input\n              value={searchText}\n              onChange={e => updateSearchText(e.target.value)}\n              placeholder=\"Search\"\n              className=\"p-2\"\n            />\n            <Button\n              id=\"clearSearch\"\n              colour=\"white\"\n              onClick={_ => updateSearchText(\"\")}\n            >\n              <i className=\"far fa-window-close text-xl\"></i>&nbsp;\n            </Button>\n          </div>\n        </div>\n      )}\n\n      {!pageData || !pageData.items || !pageData.items.length ? (\n        /* empty state */\n        <div> nothing to show </div>\n      ) : (\n        /* data available */\n        <div className=\"m-4\">\n          {pageData.items.map(user =>\n            editUser && editUser === user._id ? (\n              <React.Fragment key={user._id}>\n                <UserForm\n                  key={user._id}\n                  afterSubmit={_ => {\n                    setEditUser(false);\n                    queryCache.refetchQueries([\"users\"]);\n                  }}\n                  initialUser={user}\n                />\n                <div className=\"p-4 \">\n                  Roles:\n                  {user.roles.sort().map(r => (\n                    <div key={r} className=\"p-2\">\n                      <i className=\"fas fa-user-tag\"></i>&nbsp;\n                      {r}\n                    </div>\n                  ))}\n                </div>\n              </React.Fragment>\n            ) : (\n              <div\n                key={user._id}\n                className=\"p-2 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-10 gap-2 rounded border border-width-2 border-opacity-25 mb-2\"\n              >\n                <div className=\"xl:col-span-4\">{user.email}</div>\n                <div className=\"text-left md:text-right xl:text-left xl:col-span-2\">\n                  {user.username}\n                </div>\n                <div className=\"xl:col-span-3\">{user.fullName}</div>\n                <Button\n                  id=\"editUser\"\n                  disabled={isFetching || isLoading}\n                  onClick={_ => {\n                    setEditUser(user._id);\n                    // setMessage(undefined);\n                  }}\n                >\n                  <div className=\"text-right\">\n                    <i className=\"fas fa-user-edit text-2xl\"></i>\n                    {user.roles.includes(\"admin\") ? (\n                      <i className=\"fas fa-user-shield text-2xl\"></i>\n                    ) : null}\n                  </div>\n                </Button>\n              </div>\n            )\n          )}\n        </div>\n      )}\n\n      {/* paging controls */}\n      {pageData && (\n        <div className=\"flex m-4\">\n          <Button\n            colour=\"green\"\n            disabled={pageData.previous === firstId}\n            additionalClass=\"mr-4\"\n            onClick={_ => setPageKey({ previous: pageData.previous })}\n          >\n            Previous\n          </Button>\n          <Button\n            colour=\"green\"\n            disabled={pageData.next === lastId}\n            onClick={_ => setPageKey({ next: pageData.next })}\n          >\n            Next\n          </Button>\n        </div>\n      )}\n\n      {/* messages */}\n      {isLoading && <div>loading...</div>}\n      {fetchError ? <div>Error: {JSON.stringify(fetchError)}</div> : null}\n    </>\n  );\n};\n\nexport default UserList;\n","import { useState, useEffect } from \"react\";\n\nexport const useDebounce = (value, delay) => {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(\n    () => {\n      // Update debounced value after delay\n\n      const handler = setTimeout(() => {\n        setDebouncedValue(value);\n      }, delay);\n\n      return () => {\n        clearTimeout(handler);\n      };\n    },\n\n    [value, delay] // Only re-call effect if value or delay changes\n  );\n\n  return debouncedValue;\n};\n","import React, { useState } from \"react\";\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\nimport { useMutation, useQuery, queryCache } from \"react-query\";\nimport { useAuth } from \"../auth/use-auth.js\";\nimport { useMessageGetter } from \"@messageformat/react\";\nimport { callGetUser, callUpdateUser } from \"../utils/query.js\";\nimport Button from \"./Button.js\";\n\nconst errorClass = (e, t, f) => (e[f] && t[f] ? \"border-2 border-red-400\" : \"\");\n\nconst Profile = props => {\n  let auth = useAuth();\n  const m = useMessageGetter(\"profile\");\n  const [editUser, setEditUser] = useState(false);\n  const [user, setUser] = useState({\n    email: auth.user.email || \"\",\n    username: auth.user.username || \"\",\n    fullName: auth.user.fullName || \"\"\n  });\n  const [userError, setUserError] = useState();\n  const [message, setMessage] = useState();\n  const [userEditError, setUserEditError] = useState();\n\n  const [mutate] = useMutation(callUpdateUser, {\n    onSuccess: newData => {\n      setEditUser(false);\n      if (newData.data.user.email !== user.email) {\n        setMessage(m(\"emailChanged\"));\n      }\n      setUserEditError(undefined);\n    },\n    onError: err => {\n      const message = ((err.response || {}).data || {}).message;\n      if (message) {\n        setUserEditError(message);\n      } else setUserEditError(err);\n    }\n  });\n\n  const doSubmit = async (userData, { setSubmitting }) => {\n    try {\n      await mutate(userData);\n      setSubmitting(false);\n    } catch (error) {\n      console.log(\"mutation error:\", error);\n    }\n  };\n\n  const { isFetching, isLoading } = useQuery(\n    [\"user\", auth.user.userId],\n    async (_, id) => await callGetUser({ id }),\n    {\n      onSuccess: ({ data }) => {\n        setUser(data);\n        setUserError(undefined);\n      },\n      onError: err => {\n        const message = (((err.response || {}).data || {}).error || {}).message;\n        if (message) {\n          setUserError(message);\n        } else setUserError(err);\n      }\n    }\n  );\n\n  return (\n    <div\n      className={`flex flex-col mt-2 ml-8 mr-8 ${\n        isFetching || isLoading ? \"cursor-wait\" : \"\"\n      }`}\n    >\n      <div className=\"ml-auto\">\n        <label htmlFor=\"editUser\"></label>\n        {!editUser && (\n          <Button\n            id=\"editUser\"\n            disabled={isFetching || isLoading}\n            onClick={_ => {\n              setEditUser(true);\n              setMessage(undefined);\n            }}\n            additionalClass=\"border-2 flex items-center\"\n          >\n            <i className=\"fas fa-user-edit text-2xl\"></i>&nbsp;\n            {m(\"editUserButton\", \"add\")}\n          </Button>\n        )}\n      </div>\n\n      {!!message && (\n        <div className=\"mt-4 p-4 rounded border border-width-2 bg-orange-200\">\n          {message}\n        </div>\n      )}\n\n      {user && (\n        <Formik\n          initialValues={{\n            userId: auth.user.userId,\n            email: user.email,\n            username: user.username,\n            fullName: user.fullName\n          }}\n          enableReinitialize={true}\n          validate={values => {\n            const errors = {};\n            if (!values.email) {\n              errors.email = \"Required\";\n            } else if (\n              !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email)\n            ) {\n              errors.email = \"Invalid email address\";\n            }\n            if (values.fullName && values.fullName.length > 30)\n              errors.fullName = \"Max 30 characters\";\n            return errors;\n          }}\n          onSubmit={doSubmit}\n        >\n          {({ errors, touched, isSubmitting, resetForm }) => (\n            <Form>\n              <div className=\"mt-4 mb-2 border rounded border-width-2 border-opacity-25\">\n                {!auth.user ? null : (\n                  <>\n                    <div className=\"p-4 flex items-center\">\n                      <i className=\"fas fa-user\"></i>&nbsp;\n                      <Field\n                        disabled={!editUser}\n                        className={`bg ${\n                          editUser ? \"bg-yellow-200\" : \"\"\n                        } rounded p-2 ${errorClass(\n                          errors,\n                          touched,\n                          \"username\"\n                        )} flex-1`}\n                        type=\"text\"\n                        name=\"username\"\n                        placeholder=\"Username\"\n                      />\n                      <ErrorMessage\n                        name=\"username\"\n                        render={msg => (\n                          <div className=\"text-red-400\">{msg}</div>\n                        )}\n                      />\n                    </div>\n                    <div className=\"p-4 flex items-center flex-grow\">\n                      <i className=\"fas fa-at\"></i>&nbsp;\n                      <Field\n                        disabled={!editUser}\n                        className={`bg ${\n                          editUser ? \"bg-yellow-200\" : \"\"\n                        } rounded p-2 ${errorClass(\n                          errors,\n                          touched,\n                          \"email\"\n                        )} flex-1`}\n                        type=\"text\"\n                        name=\"email\"\n                        placeholder=\"e-mail\"\n                      />\n                      <ErrorMessage\n                        name=\"email\"\n                        render={msg => (\n                          <div className=\"text-red-400\">{msg}</div>\n                        )}\n                      />\n                    </div>\n                    <div className=\"p-4 flex items-center flex-grow\">\n                      <Field\n                        disabled={!editUser}\n                        className={`bg ${\n                          editUser ? \"bg-yellow-200\" : \"\"\n                        } rounded p-2 ${errorClass(\n                          errors,\n                          touched,\n                          \"fullName\"\n                        )} flex-1`}\n                        type=\"text\"\n                        name=\"fullName\"\n                        placeholder=\"Full name\"\n                      />\n                      <ErrorMessage\n                        name=\"fullName\"\n                        render={msg => (\n                          <div className=\"text-red-400\">{msg}</div>\n                        )}\n                      />\n                    </div>\n                    <div className=\"p-4 \">\n                      Roles:\n                      {(user.roles||[]).sort().map(r => <div key={r} className=\"p-2\">\n                      <i className=\"fas fa-user-tag\"></i>&nbsp;\n                      {r}\n                      </div>)}\n                    </div>\n                  </>\n                )}\n\n                {editUser && (\n                  <>\n                    <div className=\"m-2 flex justify-between flex-row flex-wrap\">\n                      <div className=\"p-2\">\n                        <Button\n                          colour=\"green\"\n                          disabled={isSubmitting}\n                          type=\"submit\"\n                        >\n                          Submit\n                        </Button>\n                      </div>\n                      <div className=\"p-2\">\n                        <Button\n                          colour=\"red\"\n                          disabled={isSubmitting}\n                          onClick={_ => {\n                            resetForm();\n                            queryCache.clear();\n                            setEditUser(false);\n                          }}\n                          additionalClass=\"flex items-center\"\n                          type=\"reset\"\n                        >\n                          <i className=\"far fa-window-close text-xl\"></i>\n                          <span>&nbsp; Cancel</span>\n                        </Button>\n                      </div>\n                    </div>\n                  </>\n                )}\n              </div>\n\n              {userError && (\n                <div className=\"text-red-400\">{userError.message}</div>\n              )}\n\n              {userEditError && (\n                <div className=\"text-red-400\">{userEditError}</div>\n              )}\n            </Form>\n          )}\n        </Formik>\n      )}\n      <div>{isLoading && \"loading...\"}</div>\n    </div>\n  );\n};\nexport default Profile;\n","import React from \"react\";\nimport { queryCache, useMutation } from \"react-query\";\nimport {\n  meetingHasNotStarted,\n  meetingHasStarted,\n  iAmModerator,\n  meetingStatus\n} from \"../utils/meeting.js\";\nimport { callStartMeeting, callStopMeeting } from \"../utils/query.js\";\nimport Button from \"./Button.js\";\n\nconst MeetingStartStopButton = ({ meeting, auth, queryKeys }) => {\n  const [startMeeting] = useMutation(callStartMeeting, {\n    onSuccess: _ => queryCache.refetchQueries(queryKeys)\n  });\n\n  const [stopMeeting] = useMutation(callStopMeeting, {\n    onSuccess: _ => queryCache.refetchQueries(queryKeys)\n  });\n\n  return iAmModerator(meeting, auth) &&\n    meeting.slug &&\n    meetingHasNotStarted(meeting) ? (\n    <Button\n      colour=\"green\"\n      onClick={_ => startMeeting({ id: meeting._id })}\n      text=\"START\"\n    />\n  ) : meetingHasStarted(meeting) ? (\n    <Button\n      colour=\"green\"\n      onClick={_ => stopMeeting({ id: meeting._id })}\n      text=\"STOP\"\n    />\n  ) : !!meeting.realStartDateTime ? (\n    <Button\n      colour=\"green\"\n      onClick={_ => startMeeting({ id: meeting._id })}\n      text=\"RESTART\"\n    />\n  ) : (\n    <div>{meetingStatus(meeting)}</div>\n  );\n};\n\nexport default MeetingStartStopButton;\n","import format from \"date-fns/format\";\nimport parseISO from \"date-fns/parseISO\";\n\n/**\n * Creates a time duration map split into weeks, days, hours, ...\n * Note: months have a fixed duration of 30 days here.\n * Could be fixed with date-fns functions isLeapYear(), lastDayOfMonth().\n * @param d duration in seconds\n */\nconst dateSplit = (d = 0) => {\n  var r = {}; // result\n  var s = {\n    // structure\n    year: 31536000,\n    month: 2592000,\n    week: 604800,\n    day: 86400,\n    hour: 3600,\n    minute: 60,\n    second: 1\n  };\n\n  Object.keys(s).forEach(function (key) {\n    r[key] = Math.floor(d / s[key]);\n    d -= r[key] * s[key];\n  });\n\n  return r;\n};\n\nconst optional = (v, unit) => (v ? `${v}${unit}` : \"\");\n\nconst formatMeetingDuration = meeting => {\n  const splitDate = dateSplit(meeting.duration);\n  return meeting.duration === 0\n    ? \"0m\"\n    : `${optional(splitDate.month, \"mth\")} ${optional(\n        splitDate.week,\n        \"w\"\n      )} ${optional(splitDate.day, \"d\")} ${optional(\n        splitDate.hour,\n        \"h\"\n      )} ${optional(splitDate.minute, \"m\")} ${optional(splitDate.second, \"s\")}`;\n};\n\nconst scheduledOrRealDateTime = (scheduled, real) =>\n  !!real\n    ? format(parseISO(real), \"d.M.yyyy HH:mm\")\n    : !!scheduled\n    ? format(parseISO(scheduled), \"d.M.yyyy HH:mm\")\n    : \"\";\n\nexport { formatMeetingDuration, scheduledOrRealDateTime };\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { meetingHasStarted, iAmModerator } from \"../utils/meeting.js\";\nimport { goToMeeting } from \"../utils/query.js\";\nimport MeetingStartStopButton from \"./MeetingStartStopButton.js\";\nimport {\n  formatMeetingDuration,\n  scheduledOrRealDateTime\n} from \"../utils/datetime.js\";\n\nconst MeetingsTable = ({ auth, data }) => {\n  const [jitsiTabUrl, setJitsiTabUrl] = useState();\n  const [jitsiError, setJitsiError] = useState();\n\n  const handleGotoMeetingButton = async meeting => {\n    if (!meetingHasStarted(meeting)) return;\n    const result = await goToMeeting(meeting.slug, undefined, (tabOpened, url) =>\n      setJitsiTabUrl({\n        id: meeting._id,\n        tabOpened,\n        url: tabOpened ? null : url\n      })\n    );\n    if (result) {\n      setJitsiError({\n        id: meeting._id,\n        message: JSON.stringify(result)\n      });\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col m-1 md:m-4 mt-1 \">\n      {(data || []).map(meeting => (\n        <div\n          key={meeting._id}\n          className=\"flex flex-wrap justify-between p-4 border rounded border-width-2 border-opacity-25 mb-2\"\n        >\n          {/* Topic */}\n          <div className=\"ml-1 md:ml-2 md:mr-2\">\n            {iAmModerator(meeting, auth) ? (\n              /* Link to MeetingDetails */\n              <Link to={`/meeting/${meeting.slug}`}>\n                <div className=\"w-48 bg bg-green-400 hover:bg-green-600 rounded-md p-4 \">\n                  {meeting.topic || \"\"}\n                </div>\n              </Link>\n            ) : (\n              <div className=\"p-1 \">{meeting.topic || \"\"}</div>\n            )}\n          </div>\n\n          {/* Start */}\n          <div className=\"flex flex-col\">\n            <div\n              className={`ml-2 mr-2 ${\n                !!meeting.realStartDateTime ? \"italic\" : \"\"\n              }`}\n            >\n              {scheduledOrRealDateTime(\n                meeting.startDateTime,\n                meeting.realStartDateTime\n              )}\n            </div>\n\n            {/* End */}\n            {/*\n          <div className=\"ml-2 mr-2\">\n            {scheduledOrRealDateTime(\n              meeting.endDateTime,\n              meeting.realEndDateTime\n            )}\n          </div>\n          */}\n\n            {/* Duration */}\n            <div className=\"ml-2 mr-2\">{formatMeetingDuration(meeting)}</div>\n          </div>\n\n          {/* Moderator Action */}\n          {iAmModerator(meeting, auth) ? (\n            <div className=\"ml-2 mr-2 \">\n              <MeetingStartStopButton meeting={meeting} auth={auth} />\n            </div>\n          ) : (\n            <div />\n          )}\n\n          {/* Join Action */}\n          {!iAmModerator(meeting, auth) ? (\n            <div className=\"ml-2 mr-2 \">\n              <Link to={`/m/${meeting.slug}`}>\n                <div className=\"w-48 text-center bg bg-green-400 hover:bg-green-600 uppercase rounded-md p-4 \">\n                  Join meeting\n                </div>\n              </Link>\n            </div>\n          ) : (\n            <div className=\"ml-2 mr-2 \">\n              <button\n                className={`w-48 text-center  uppercase rounded-md p-4 ${\n                  !meetingHasStarted(meeting)\n                    ? \"bg bg-gray-400 cursor-not-allowed text-gray-600\"\n                    : \"bg bg-green-400 hover:bg-green-600\"\n                }`}\n                onClick={_ => handleGotoMeetingButton(meeting)}\n                disabled={!meetingHasStarted(meeting)}\n              >\n                Open meeting\n              </button>\n              {!!jitsiTabUrl &&\n                !jitsiTabUrl.tabOpened &&\n                jitsiTabUrl.id === meeting._id && (\n                  <div className=\"p-4 rounded-md bg-red-300 break-all\">\n                    <p>Pop-up blocked, use</p>\n                    <p>\n                      <a className=\"underline\" href={jitsiTabUrl.url}>\n                        {jitsiTabUrl.url}\n                      </a>\n                    </p>\n                  </div>\n                )}\n              {jitsiError && jitsiError.id === meeting._id && (\n                <div className=\"p-4 rounded-md bg-red-300 break-all\">\n                  <p>Error:</p>\n                  <p>{jitsiError.message}</p>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default MeetingsTable;\n","import React, { useEffect, useState } from \"react\";\nimport { authedAxios } from \"../axios/axiosHelpers.js\";\nimport isAfter from \"date-fns/isAfter\";\nimport parseISO from \"date-fns/parseISO\";\nimport { useQuery } from \"react-query\";\nimport * as storage from \"../utils/storage\";\n\nimport { useAuth } from \"../auth/use-auth.js\";\n\nimport MeetingsTable from \"./MeetingsTable.js\";\n\nconst API_SERVER = process.env.REACT_APP_API_SERVER;\n// refetch meetings every so often to get status of ongoing meetings\nconst POLLING_INTERVAL_MS = 60000;\n\nconst Meetings = () => {\n  let auth = useAuth();\n  let [jwtExpired, setJwtExpired] = useState();\n\n  useEffect(() => {\n    if (jwtExpired) {\n      console.log(\"useEffect: JWT expired, calling signout\");\n      auth.signout(_ =>\n        console.log(\"auth.signout finished due to expired JWT\")\n      );\n    }\n  }, [auth, jwtExpired]);\n\n  const fetchMeetings = async _ => {\n    const result = await authedAxios.get(`${API_SERVER}/api/meetings`);\n    return result\n      ? result.data.sort((a, b) =>\n          isAfter(parseISO(a.startDateTime), parseISO(b.startDateTime)) ? -1 : 1\n        )\n      : [];\n  };\n\n  const { isFetching, isLoading, isError, data, error } = useQuery(\n    [\"meetings\"],\n    fetchMeetings,\n    {\n      refetchInterval: POLLING_INTERVAL_MS,\n      onError: err => {\n        if (err.response) {\n          console.error(\"useQuery.onError:\", err.response);\n        } else {\n          console.error(\"useQuery other error:\", err.message);\n        }\n      }\n    }\n  );\n\n  if (isError) {\n    const responseDataMessageArray = (\n      ((error.response || {}).data || {}).error || { message: [\"\"] }\n    ).message;\n    if (!jwtExpired && !storage.local.getItem(\"accessToken\")) {\n      console.log(\"setJwtExpired\");\n      setJwtExpired(true);\n    }\n\n    if (error.message) {\n      return (\n        <div className=\"flex h-screen items-center justify-center\">\n          <div className=\"text-center text-3xl items-start\">\n            <div>Other Error: {error.message}</div>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"flex h-screen items-center justify-center\">\n        <div className=\"text-center text-3xl items-start\">\n          <div>Error: {JSON.stringify(responseDataMessageArray)}</div>\n        </div>\n      </div>\n    );\n  }\n\n  const ownMeetings = (data || []).filter(\n    m => m.moderator === auth.user.userId\n  );\n  const otherMeetings = (data || []).filter(\n    m => m.moderator !== auth.user.userId\n  );\n\n  return (\n    <>\n      <div\n        id=\"MeetingsTable\"\n        className={isLoading || isFetching ? \"cursor-wait\" : undefined}\n      >\n        {ownMeetings.length ? (\n          <>\n            <div className=\"font-bold ml-1 mt-1 md:ml-4 md:mt-4\">\n              You are moderator in these meetings:\n            </div>\n            <MeetingsTable auth={auth} data={ownMeetings} />\n          </>\n        ) : (\n          <div className=\"text-lg text-center m-4\">No own meetings</div>\n        )}\n        {otherMeetings.length ? (\n          <>\n            <div className=\"font-bold ml-4 mt-4\">\n              You are participant in these meetings:\n            </div>\n            <MeetingsTable auth={auth} data={otherMeetings} />\n          </>\n        ) : (\n          <div className=\"text-lg text-center m-4\"></div>\n        )}\n      </div>\n      {isLoading && <div>loading...</div>}\n    </>\n  );\n};\nexport default Meetings;\n","import React from \"react\";\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\nimport parse from \"date-fns/parse\";\nimport parseISO from \"date-fns/parseISO\";\nimport format from \"date-fns/format\";\nimport { useMutation, queryCache } from \"react-query\";\nimport { callCreateMeeting } from \"../utils/query.js\";\nimport Button from \"./Button.js\";\n\nconst errorClass = (e, t, f) => (e[f] && t[f] ? \"border-2 border-red-400\" : \"\");\n\nconst MeetingsForm = ({\n  initialMeeting = {},\n  showDeleteButton = false,\n  afterSubmit\n}) => {\n  const [mutate, { error }] = useMutation(callCreateMeeting, {\n    onSuccess: _ => {\n      queryCache.refetchQueries([\"meetings\"]);\n      queryCache.refetchQueries([\"meeting\", initialMeeting.slug]);\n    }\n  });\n\n  const doSubmit = async (\n    {\n      _id,\n      startDate,\n      startTime,\n      endDate,\n      endTime,\n      topic,\n      isGuestsAllowed,\n      description\n    },\n    { setSubmitting }\n  ) => {\n    const startDateTime = parse(\n      `${startDate} ${startTime}`,\n      \"yyyy-MM-dd HH:mm\",\n      new Date()\n    );\n    const endDateTime = parse(\n      `${endDate} ${endTime}`,\n      \"yyyy-MM-dd HH:mm\",\n      new Date()\n    );\n\n    try {\n      await mutate({\n        _id,\n        topic,\n        startDateTime,\n        endDateTime,\n        isGuestsAllowed,\n        description\n      });\n      setSubmitting(false);\n      afterSubmit && afterSubmit();\n    } catch (error) {\n      console.log(\"mutation error:\", error);\n    }\n  };\n\n  error && console.log(\"error=\", error);\n\n  return (\n    <div className=\"m-4\">\n      <Formik\n        initialValues={{\n          _id: initialMeeting._id,\n          topic: initialMeeting.topic || \"\",\n          startDate: initialMeeting.startDateTime\n            ? format(parseISO(initialMeeting.startDateTime), \"yyyy-MM-dd\")\n            : \"\",\n          startTime: initialMeeting.startDateTime\n            ? format(parseISO(initialMeeting.startDateTime), \"HH:mm\")\n            : \"\",\n          endDate: initialMeeting.endDateTime\n            ? format(parseISO(initialMeeting.endDateTime), \"yyyy-MM-dd\")\n            : \"\",\n          endTime: initialMeeting.endDateTime\n            ? format(parseISO(initialMeeting.endDateTime), \"HH:mm\")\n            : \"\",\n          isGuestsAllowed: initialMeeting.isGuestsAllowed || false,\n          description: initialMeeting.description || \"\"\n        }}\n        onSubmit={doSubmit}\n      >\n        {({ errors, touched, isSubmitting }) => (\n          <Form>\n            <div className=\"p-2 flex flex-col\">\n              <div className=\"text-sm \">Topic</div>\n              <Field\n                className={`bg bg-yellow-200 rounded p-2 ${errorClass(\n                  errors,\n                  touched,\n                  \"topic\"\n                )}`}\n                type=\"text\"\n                name=\"topic\"\n                placeholder=\"Meeting Topic\"\n              />\n              <ErrorMessage\n                name=\"topic\"\n                render={msg => <div className=\"text-red-400\">{msg}</div>}\n              />\n            </div>\n            <div className=\"flex flex-col lg:flex-row lg:flex-wrap\">\n              <div className=\"p-2\">\n                <div className=\"text-sm \">Scheduled start</div>\n                <Field\n                  className={`bg bg-yellow-200 rounded p-2 ${errorClass(\n                    errors,\n                    touched,\n                    \"startDate\"\n                  )}`}\n                  type=\"date\"\n                  name=\"startDate\"\n                  placeholder=\"Start Date\"\n                />\n                <Field\n                  className={`bg bg-yellow-200 rounded p-2 ${errorClass(\n                    errors,\n                    touched\n                  )}`}\n                  type=\"time\"\n                  name=\"startTime\"\n                  placeholder=\"Start Time\"\n                />\n              </div>\n              <div className=\"p-2\">\n                <div className=\"text-sm \">Scheduled end</div>\n                <Field\n                  className={`bg bg-yellow-200 rounded p-2 ${errorClass(\n                    errors,\n                    touched\n                  )}`}\n                  type=\"date\"\n                  name=\"endDate\"\n                  placeholder=\"End Date\"\n                />\n                <Field\n                  className={`bg bg-yellow-200 rounded p-2 ${errorClass(\n                    errors,\n                    touched\n                  )}`}\n                  type=\"time\"\n                  name=\"endTime\"\n                  placeholder=\"End Time\"\n                />\n              </div>\n              <div className=\"p-2\">\n                <label htmlFor=\"isGuestsAllowed\">\n                  <div className=\"text-sm \">Guests allowed&nbsp;</div>\n                </label>\n                <Field\n                  id=\"isGuestsAllowed\"\n                  className={`bg bg-yellow-200 rounded p-2 ${errorClass(\n                    errors,\n                    touched\n                  )}`}\n                  name=\"isGuestsAllowed\"\n                  type=\"checkbox\"\n                />\n              </div>\n            </div>\n            <div className=\"p-2 flex flex-col\">\n              <div className=\"text-sm \">Description</div>\n              <Field\n                className={`bg bg-yellow-200 rounded p-2 ${errorClass(\n                  errors,\n                  touched,\n                  \"description\"\n                )}`}\n                type=\"textarea\"\n                component=\"textarea\"\n                rows={3}\n                name=\"description\"\n                placeholder=\"Meeting description\"\n              />\n              <ErrorMessage name=\"name\" component=\"div\" />\n            </div>\n            <div className=\"flex justify-between flex-row flex-wrap\">\n              <div className=\"p-2\">\n                <Button colour=\"green\" disabled={isSubmitting} type=\"submit\">\n                  Submit\n                </Button>\n              </div>\n              {showDeleteButton && (\n                <div className=\"p-2\">\n                  <Button colour=\"red\">Delete</Button>\n                </div>\n              )}\n              <div className=\"p-2\">\n                <Button\n                  colour=\"red\"\n                  additionalClass=\"flex items-center\"\n                  onClick={afterSubmit}\n                >\n                  <i className=\"far fa-window-close text-xl\"></i>\n                  <span>&nbsp; Cancel</span>\n                </Button>\n              </div>\n            </div>\n            {error && <div className=\"text-red-400\">{error.message}</div>}\n          </Form>\n        )}\n      </Formik>\n    </div>\n  );\n};\n\nexport default MeetingsForm;\n","import React, { useState } from \"react\";\nimport Meetings from \"./Meetings.js\";\nimport MeetingsForm from \"./MeetingsForm.js\";\nimport { useMessageGetter } from \"@messageformat/react\";\nimport Button from \"./Button.js\";\n\nconst MeetingsPage = () => {\n  const m = useMessageGetter(\"meetingDetails\");\n  const [addMeeting, setAddMeeting] = useState(false);\n\n  return (\n    <div>\n      <div className=\"mt-4 mb-4 p-4 flex\">\n        <div className=\"ml-auto\">\n          <label htmlFor=\"addMeeting\"></label>\n          {!addMeeting && (\n            <Button\n              id=\"addMeeting\"\n              colour=\"white\"\n              onClick={_ => setAddMeeting(true)}\n              additionalClass=\"p-4 border-2 rounded-md hover:bg-gray-100 flex items-center\"\n            >\n              <i className=\"far fa-plus-square text-xl\"></i>&nbsp;\n              {m(\"addMeetingButton\", \"add\")}\n            </Button>\n          )}\n        </div>\n      </div>\n\n      <div className=\"m-1 p-1 md:m-4 md:p-4 border-2 rounded-md\">\n        {addMeeting && <MeetingsForm afterSubmit={_ => setAddMeeting(false)} />}\n        <Meetings />\n      </div>\n    </div>\n  );\n};\n\nexport default MeetingsPage;\n","import format from \"date-fns/format\";\nimport parseISO from \"date-fns/parseISO\";\n\nexport const formatDateTime = d =>\n  d\n    ? typeof d === \"string\"\n      ? format(parseISO(d), \"dd.MM.yyyy HH:mm\")\n      : format(d, \"dd.MM.yyyy HH:mm\")\n    : undefined;\n","import React, { useEffect, useState } from \"react\";\nimport { useMutation, useQuery } from \"react-query\";\nimport { Link } from \"react-router-dom\";\nimport { Redirect, useParams } from \"react-router-dom\";\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\n\nimport Button from \"./Button.js\";\nimport {\n  anonAxios,\n  authedAxios,\n  ERROR_NO_ACCESSTOKEN\n} from \"../axios/axiosHelpers.js\";\nimport { useAuth } from \"../auth/use-auth.js\";\nimport {\n  iAmModerator,\n  meetingHasStarted,\n  MEETINGSTATUSES,\n  meetingStatus\n} from \"../utils/meeting.js\";\nimport {\n  goToMeeting,\n  callAddParticipantToMeeting,\n  callMeetingModerator,\n  callGetUser\n} from \"../utils/query.js\";\nimport { formatDateTime } from \"../utils/l18n.js\";\nimport { formatMeetingDuration } from \"../utils/datetime.js\";\n\nconst POLLING_INTERVAL_MS = 5000;\nconst errorClass = (e, t, f) => (e[f] && t[f] ? \"border-2 border-red-400\" : \"\");\n\nconst DEFAULT_GUEST_NAME = \"Guest\";\n\n/**\n * This component will be shown if the URL is a slug meeting URL like\n * \"/m/8495-9458-9990\". Translate slug meeting URL given to user beforehand into\n * real meeting URL containing short-lived JWT token. Show \"Go to meeting\"\n * button\n */\nconst MeetingRedirect = ({ guestRoute }) => {\n  let auth = useAuth();\n  let { slug } = useParams();\n  const [fetchError, setFetchError] = useState();\n  const [meeting, setMeeting] = useState();\n  const [tryCounter, setTryCounter] = useState(0);\n  const [jwtExpired, setJwtExpired] = useState();\n  const [redirected, setRedirected] = useState(false);\n  const [addedAsParticipant, setAddedAsParticipant] = useState(false);\n  const [moderatorDetails, setModeratorDetails] = useState();\n  const [user, setUser] = useState();\n  const [guestName, setGuestName] = useState(DEFAULT_GUEST_NAME);\n  const [jitsiTabUrl, setJitsiTabUrl] = useState();\n  const [jitsiError, setJitsiError] = useState();\n\n  /* Signout on JWT expired */\n  useEffect(() => {\n    if (jwtExpired) auth.signout();\n  }, [auth, jwtExpired]);\n\n  /* Fetch status */\n  const { isFetching, isLoading } = useQuery(\n    [\"meeting\", slug],\n    async (_, slug) =>\n      (await guestRoute)\n        ? anonAxios.get(`/api/meetings/byslug/${slug}/status`)\n        : authedAxios.get(`/api/meetings/byslug/${slug}/status`),\n    {\n      refetchInterval: POLLING_INTERVAL_MS,\n      onSuccess: ({ data }) => {\n        setMeeting(data);\n        setTryCounter(tryCounter + 1);\n        setFetchError(undefined);\n      },\n      onError: err => {\n        const message = (((err.response || {}).data || {}).error || {}).message;\n        if (message) {\n          setFetchError(\"Error fetching meeting: \" + message);\n          if (message === \"jwt expired\") setJwtExpired(true);\n        } else if (err === ERROR_NO_ACCESSTOKEN) {\n          setFetchError(`No access token, please log out and in again.`);\n          alert(\"No access token, please log in again\");\n          auth.signout();\n        } else setFetchError(\"Error: \" + err);\n      }\n    }\n  );\n\n  useQuery(\n    [\"moderator\", meeting],\n    async (_, meeting) =>\n      await callMeetingModerator({\n        meetingId: meeting._id,\n        moderatorId: meeting.moderator,\n        asGuest: meeting.accessAsGuest\n      }),\n    {\n      enabled: !!meeting && !moderatorDetails,\n      onSuccess: ({ data }) => setModeratorDetails(data),\n      onError: err => {\n        const message = (((err.response || {}).data || {}).error || {}).message;\n        if (message) {\n          console.error(message);\n        }\n      }\n    }\n  );\n\n  useEffect(() => {\n    void (async function () {\n      if (!user && auth.user) {\n        try {\n          setUser((await callGetUser({ id: auth.user.userId })).data);\n        } catch (err) {\n          console.error(err);\n        }\n      }\n    })();\n  }, [auth, user]);\n\n  /* Add participant to meeting */\n  const [addParticipant] = useMutation(callAddParticipantToMeeting, {\n    onSuccess: _ => {\n      setFetchError(undefined);\n      setAddedAsParticipant(true);\n    },\n    onError: err => {\n      if (err.response) {\n        setFetchError(\"useQuery.onError: \" + JSON.stringify(err.response));\n      } else {\n        setFetchError(\"useQuery other error:\" + err.message);\n      }\n    }\n  });\n\n  useEffect(() => {\n    async function updateParticipantList() {\n      await addParticipant({\n        meetingId: meeting._id,\n        participantId: auth.user.userId\n      });\n    }\n    if (meeting && (auth || {}).user && !addedAsParticipant) {\n      updateParticipantList();\n    }\n  }, [meeting, auth, addParticipant, addedAsParticipant]);\n\n  /* Moderators should be either redirected to the Jitsi meet or to\n   * the details page, depending on whether meeting has started.\n   * This is so the deep link works without too much clicking.\n   */\n  // TODO: this doesn't work yet, causes an endless loop for moderators when\n  // closing Jitsi-Meet or opening portal tab\n  // useEffect(() => {\n  //   if (redirected) goToMeeting(meeting.slug);\n  // }, [redirected, meeting, auth]);\n\n  /* No data yet */\n  if (!meeting) {\n    return (\n      <div\n        className={`flex h-screen items-center justify-center ${\n          isFetching || isLoading ? \"cursor-wait\" : \"\"\n        }`}\n      >\n        {fetchError ? (\n          <div className=\"text-red-400\">{fetchError}</div>\n        ) : (\n          <div className=\"text-center text-3xl items-start\">\n            <Link to=\"/\">Please wait...</Link>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  /* Backstage pass */\n  if (iAmModerator(meeting, auth) && !redirected) {\n    if (meetingHasStarted(meeting)) setRedirected(true);\n    else return <Redirect to={`/meeting/${meeting.slug}`} />;\n  }\n\n  /* No freeloaders */\n  if (meeting.accessAsGuest && guestRoute && !meeting.isGuestsAllowed) {\n    return (\n      <div className={\"flex h-screen items-center justify-center\"}>\n        <div className=\"text-center text-3xl items-start underline\">\n          <Link to=\"/\">Guests are not allowed in this meeting.</Link>\n        </div>\n      </div>\n    );\n  }\n\n  /*\n   * at this stage, there will be a meeting and user will be not the moderator\n   */\n\n  /* TODO: If logged in, /m/<slug>/guest route is wrong, go to non-guest route */\n  // console.log('auth:', auth);\n  // if ((auth||{}).user && guestRoute && !meeting.accessAsGuest){\n  //   console.log('logged in to /guest');\n  //   return <Redirect to={`/m/${meeting.slug}`} />\n  // }\n\n  /*\n    logged in:\n      yes:\n            isStarted:\n                yes: <button go to meeting>\n                no: wait...\n\n      no:\n            guest route:\n              yes: guests allowed:\n                      yes: isStarted:wait/<button go to meeting>\n                      (*)no: forbidden\n              (*)no: redirect to Login with deepLink\n  */\n\n  const handleGotoMeetingButton = async meeting => {\n    if (!meetingHasStarted(meeting)) return;\n    const result = await goToMeeting(\n      meeting.slug,\n      guestRoute ? guestName || DEFAULT_GUEST_NAME : null,\n      (tabOpened, url) =>\n        setJitsiTabUrl({\n          id: meeting._id,\n          tabOpened,\n          url: tabOpened ? null : url\n        })\n    );\n    if (result) {\n      setJitsiError({\n        id: meeting._id,\n        message: JSON.stringify(result)\n      });\n    }\n  };\n\n  if (guestRoute) {\n    if (!meeting.isGuestsAllowed) return <div>GUESTS NOT ALLOWED</div>;\n    // else wait/<button go to meeting>\n  } else {\n    /* Not logged in to /m/<slug>/guest: Login first */\n    if (!(auth || {}).user && !meeting.accessAsGuest)\n      return <Redirect to={`/m/${meeting.slug}`} />;\n  }\n\n  return (\n    <>\n      <div className=\"flex flex-col mt-1 ml-1 mr-1 md:mt-2 md:ml-8 md:mr-8\">\n        <div className=\"md:mt-4 mb-2 border rounded border-width-2 border-opacity-25\">\n          <div className=\"p-4 text-lg rounded-md \">{meeting.topic || \"\"}</div>\n          {meeting.description && (\n            <div className=\"italic rounded-md p-4\">{meeting.description}</div>\n          )}\n        </div>\n\n        {moderatorDetails && (\n          <div className=\"p-4 rounded-md border border-width-2 border-opacity-25\">\n            <div className=\"text-lg\">Moderator:</div>\n            <div className=\"p-4 rounded-md border border-width-2 border-opacity-25 break-all\">\n              {moderatorDetails.username\n                ? `${moderatorDetails.username} (${moderatorDetails.email})`\n                : moderatorDetails.email}\n            </div>\n          </div>\n        )}\n\n        <div className=\"mt-4 mb-2 p-4 border rounded border-width-2 border-opacity-25\">\n          <div className=\"text-lg\">\n            Current meeting status: {MEETINGSTATUSES[meetingStatus(meeting)]}\n          </div>\n\n          {meeting.accessAsGuest && (\n            <Formik\n              initialValues={{ guestName: \"\" }}\n              validate={values => {\n                const errors = {};\n                if (values.guestName && values.guestName.length > 30)\n                  errors.guestName = \"Max 30 characters\";\n                setGuestName(values.guestName);\n                return errors;\n              }}\n            >\n              {({ errors, touched }) => (\n                <Form>\n                  <Field\n                    className={`bg-yellow-200 rounded p-2 border-width-2 ${errorClass(\n                      errors,\n                      touched,\n                      \"guestName\"\n                    )}`}\n                    type=\"text\"\n                    name=\"guestName\"\n                    placeholder=\"Name\"\n                  />\n                  <div />\n                  <ErrorMessage\n                    name=\"guestName\"\n                    render={msg => <div className=\"text-red-400\">{msg}</div>}\n                  />\n                </Form>\n              )}\n            </Formik>\n          )}\n\n          {!!meetingHasStarted(meeting) && (\n            <>\n              <div className=\"mt-2 ml-2 mb-2\">\n                open the conference\n                <span className=\"font-bold\">\n                  {`${\n                    meeting.accessAsGuest\n                      ? \" as guest\"\n                      : ` as ${\n                          !!(user || {}).username\n                            ? (user || {}).username\n                            : ((auth || {}).user || {}).email\n                        }`\n                  }`}\n                </span>\n              </div>\n              <div className=\"flex\">\n                <div className=\"ml-2 mr-2 \">\n                  <Button\n                    colour=\"green\"\n                    onClick={_ => handleGotoMeetingButton(meeting)}\n                    text=\"Go to meeting\"\n                  />\n                  {!!jitsiTabUrl &&\n                    !jitsiTabUrl.tabOpened &&\n                    jitsiTabUrl.id === meeting._id && (\n                      <div className=\"p-4 rounded-md bg-red-300 break-all\">\n                        <p>Pop-up blocked, use</p>\n                        <p>\n                          <a className=\"underline\" href={jitsiTabUrl}>\n                            {jitsiTabUrl}\n                          </a>\n                        </p>\n                      </div>\n                    )}\n                  {jitsiError && jitsiError.id === meeting._id && (\n                    <div className=\"p-4 rounded-md bg-red-300 break-all\">\n                      <p>Error:</p>\n                      <p>{jitsiError.message}</p>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n\n        <div className=\"mt-4 mb-2 p-4 border rounded border-width-2 border-opacity-25\">\n          <div className=\"mt-2 p-2 border rounded border-2 border-opacity-25 break-all\">\n            {!!meeting.startDateTime && (\n              <div>\n                scheduled start: {formatDateTime(meeting.startDateTime)}\n              </div>\n            )}\n            {!!meeting.endDateTime && (\n              <div>scheduled end: {formatDateTime(meeting.endDateTime)}</div>\n            )}\n            {!!meeting.realStartDateTime && (\n              <div>last start: {formatDateTime(meeting.realStartDateTime)}</div>\n            )}\n            {!!meeting.realEndDateTime && (\n              <div>last end: {formatDateTime(meeting.realEndDateTime)}</div>\n            )}\n            {meeting.duration !== undefined && (\n              <div>duration so far: {formatMeetingDuration(meeting)}</div>\n            )}\n            <div>\n              room name:{\" \"}\n              {`${\n                meeting.roomName\n                  ? '\"' + meeting.roomName + '\"'\n                  : \"(no room has been created yet)\"\n              }`}\n            </div>\n            <div>\n              Guests allowed: &nbsp;{\" \"}\n              <input\n                type=\"checkbox\"\n                checked={meeting.isGuestsAllowed}\n                disabled\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      {fetchError && <div className=\"text-red-400\">{fetchError}</div>}\n    </>\n  );\n};\nexport default MeetingRedirect;\n","import React, { useState, useEffect } from \"react\";\nimport { useMutation, useQuery, queryCache } from \"react-query\";\nimport { Link, useHistory, useParams } from \"react-router-dom\";\nimport { createSlugUrl, createSlugUrlForGuests } from \"../utils/slug.js\";\nimport { formatDateTime } from \"../utils/l18n.js\";\nimport { formatMeetingDuration } from \"../utils/datetime.js\";\nimport MeetingStartStopButton from \"./MeetingStartStopButton.js\";\nimport MeetingsForm from \"./MeetingsForm.js\";\nimport { useMessageGetter } from \"@messageformat/react\";\nimport { ERROR_NO_ACCESSTOKEN } from \"../axios/axiosHelpers.js\";\n\nimport { useAuth } from \"../auth/use-auth.js\";\nimport {\n  meetingHasNotStarted,\n  meetingHasStarted,\n  MEETINGSTATUSES,\n  meetingStatus,\n  iAmModerator\n} from \"../utils/meeting.js\";\nimport {\n  goToMeeting,\n  callDeleteMeeting,\n  callMeetingBySlug,\n  callMeetingParticipants,\n  callGetUser\n} from \"../utils/query.js\";\nimport Button from \"./Button.js\";\n\n/**\n * Component to edit meeting details\n */\nconst MeetingDetails = () => {\n  const auth = useAuth();\n  const history = useHistory();\n  const { slug } = useParams();\n  const m = useMessageGetter(\"meetingDetails\");\n  const [fetchError, setFetchError] = useState();\n  const [meeting, setMeeting] = useState();\n  const [editMeeting, setEditMeeting] = useState(false);\n  const [participantDetails, setParticipantDetails] = useState();\n  const [user, setUser] = useState();\n  const [jitsiTabUrl, setJitsiTabUrl] = useState();\n  const [jitsiError, setJitsiError] = useState();\n\n  const { isLoading } = useQuery(\n    [\"meeting\", slug],\n    async (_, slug) => await callMeetingBySlug({ slug }),\n    {\n      onSuccess: ({ data }) => {\n        setMeeting(data);\n        setFetchError(null);\n      },\n      onError: err => {\n        const message = (\n          ((err.response || {}).data || {}).error ||\n          (err.response || {}).data ||\n          {}\n        ).message;\n        if (message) {\n          setFetchError(message);\n        } else if (err === ERROR_NO_ACCESSTOKEN) {\n          setFetchError(`No access token, please log out and in again.`);\n          alert(\"No access token, please log in again\");\n          auth.signout();\n        } else setFetchError(\"Error: \" + err);\n      }\n    }\n  );\n\n  useQuery(\n    [\"participants\", meeting],\n    async (_, meeting) =>\n      await callMeetingParticipants({\n        meetingId: meeting._id,\n        meetingParticipants: meeting.participants\n      }),\n    {\n      enabled: !!meeting && (meeting.participants || []).length,\n      onSuccess: ({ data }) => setParticipantDetails(data),\n      onError: err => {\n        const message = (((err.response || {}).data || {}).error || {}).message;\n        if (message) {\n          console.error(message);\n        }\n      }\n    }\n  );\n\n  const [deleteMeeting] = useMutation(callDeleteMeeting, {\n    onSuccess: _ => {\n      queryCache.refetchQueries([\"meetings\"]);\n      history.goBack();\n    },\n    onError: err => {\n      if (err.response) {\n        setFetchError(\"useQuery.onError: \" + JSON.stringify(err.response));\n      } else {\n        setFetchError(\"useQuery other error:\" + err.message);\n      }\n    }\n  });\n\n  useEffect(() => {\n    void (async function () {\n      if (!user && auth.user) {\n        try {\n          setUser((await callGetUser({ id: auth.user.userId })).data);\n        } catch (err) {\n          console.error(err);\n        }\n      }\n    })();\n  }, [auth, user]);\n\n  const handleGotoMeetingButton = async meeting => {\n    if (!meetingHasStarted(meeting)) return;\n    const result = await goToMeeting(\n      meeting.slug,\n      undefined,\n      (tabOpened, url) =>\n        setJitsiTabUrl({\n          id: meeting._id,\n          tabOpened,\n          url: tabOpened ? null : url\n        })\n    );\n    if (result) {\n      setJitsiError({\n        id: meeting._id,\n        message: JSON.stringify(result)\n      });\n    }\n  };\n\n  return (\n    <>\n      <div className=\"m-4 mb-2\">\n        <Button\n          colour=\"white\"\n          additionalClass=\"border-2 hover:bg-gray-100 flex items-center\"\n          onClick={_ => history.goBack()}\n          text={<span>&lt;&mdash; Back</span>}\n        />\n      </div>\n      {!!meeting && (\n        <div>\n          <div className=\"flex flex-col mt-1 ml-1 mr-1 md:mt-2 md:ml-8 md:mr-8\">\n            <div className=\"mt-4 mb-2 border rounded border-width-2 border-opacity-25\">\n              <Link to={createSlugUrl(meeting.slug)}>\n                <div className=\"p-4 text-lg hover:bg-gray-100 rounded-md \">\n                  {meeting.topic || \"\"}\n                </div>\n              </Link>\n              {meeting.description && (\n                <div className=\"italic hover:bg-green-400 rounded-md p-4\">\n                  {meeting.description}\n                </div>\n              )}\n            </div>\n\n            <div className=\"mt-4 mb-2 p-4 border rounded border-width-2 border-opacity-25\">\n              <div className=\"text-lg\">\n                Current meeting status:{\" \"}\n                {MEETINGSTATUSES[meetingStatus(meeting)]}\n              </div>\n\n              <div className=\"flex\">\n                {!iAmModerator(meeting, auth) && (\n                  <Link to={createSlugUrl(meeting.slug)}>\n                    <div className=\"w-48 text-center bg bg-green-400 hover:bg-green-600 uppercase rounded-md p-4 \">\n                      Join meeting\n                    </div>\n                  </Link>\n                )}\n                {iAmModerator(meeting, auth) && meetingHasStarted(meeting) && (\n                  <div className=\"p-2\">\n                    <Button\n                      colour=\"green\"\n                      onClick={_ => handleGotoMeetingButton(meeting)}\n                    >\n                      Open meeting\n                    </Button>\n                    {!!jitsiTabUrl &&\n                      !jitsiTabUrl.tabOpened &&\n                      jitsiTabUrl.id === meeting._id && (\n                        <div className=\"p-4 rounded-md bg-red-300 break-all\">\n                          <p>Pop-up blocked, use</p>\n                          <p>\n                            <a className=\"underline\" href={jitsiTabUrl}>\n                              {jitsiTabUrl}\n                            </a>\n                          </p>\n                        </div>\n                      )}\n                    {jitsiError && jitsiError.id === meeting._id && (\n                      <div className=\"p-4 rounded-md bg-red-300 break-all\">\n                        <p>Error:</p>\n                        <p>{jitsiError.message}</p>\n                      </div>\n                    )}\n                  </div>\n                )}\n                <div className=\"p-2\">\n                  <MeetingStartStopButton\n                    meeting={meeting}\n                    auth={auth}\n                    queryKeys={[\"meeting\", slug]}\n                  />\n                </div>\n                {meetingHasNotStarted(meeting) && !meetingHasStarted(meeting) && (\n                  <div className=\"p-2\">\n                    <Button\n                      colour=\"red\"\n                      onClick={_ =>\n                        deleteMeeting({\n                          id: meeting._id\n                        })\n                      }\n                    >\n                      Delete\n                    </Button>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"mt-4 mb-2 p-4 border rounded border-width-2 border-opacity-25\">\n              <label htmlFor=\"editMeeting\"></label>\n              {!editMeeting && (\n                <Button\n                  id=\"editMeeting\"\n                  colour=\"white\"\n                  onClick={_ => setEditMeeting(true)}\n                  additionalClass=\"border-2 hover:bg-gray-100 flex items-center\"\n                >\n                  <i className=\"fas fa-edit text-2xl\"></i>&nbsp;\n                  {m(\"editButton\", \"edit\")}\n                </Button>\n              )}\n\n              {editMeeting && (\n                <MeetingsForm\n                  initialMeeting={meeting}\n                  afterSubmit={_ => setEditMeeting(false)}\n                />\n              )}\n\n              <div className=\"mt-2 p-2 border rounded border-2 border-opacity-25\">\n                {!!meeting.startDateTime && (\n                  <div>\n                    scheduled start: {formatDateTime(meeting.startDateTime)}\n                  </div>\n                )}\n                {!!meeting.endDateTime && (\n                  <div>\n                    scheduled end: {formatDateTime(meeting.endDateTime)}\n                  </div>\n                )}\n                {!!meeting.realStartDateTime && (\n                  <div>\n                    last start: {formatDateTime(meeting.realStartDateTime)}\n                  </div>\n                )}\n                {!!meeting.realEndDateTime && (\n                  <div>last end: {formatDateTime(meeting.realEndDateTime)}</div>\n                )}\n                {meeting.duration !== undefined && (\n                  <div>duration so far: {formatMeetingDuration(meeting)}</div>\n                )}\n                <div>\n                  room name:{\" \"}\n                  {`${\n                    meeting.roomName\n                      ? '\"' + meeting.roomName + '\"'\n                      : \"(no room has been created yet)\"\n                  }`}\n                </div>\n                <div>\n                  Guests allowed: &nbsp;{\" \"}\n                  <input\n                    type=\"checkbox\"\n                    checked={meeting.isGuestsAllowed}\n                    disabled\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"mt-4 mb-2 p-4 border rounded border-width-2 border-opacity-25 italic\">\n              <div className=\"text-lg\">E-mail template:</div>\n              <div className=\"ml-4 break-all\">\n                Dear meeting participant,\n                <p />\n                you are invited to join my meeting\n                {!!meeting.startDateTime &&\n                  ` starting at ${formatDateTime(meeting.startDateTime)} `}\n                {!!meeting.endDateTime &&\n                  ` and ending at ${formatDateTime(meeting.endDateTime)} `}\n                <p />\n                <div className=\"mt-2\">\n                  If you are a registered user of{\" \"}\n                  {process.env.REACT_APP_BRANDING}, you can join through this\n                  direct link:\n                  <div className=\"ml-2\">{createSlugUrl(meeting.slug)}</div>\n                </div>\n                <p />\n                {meeting.isGuestsAllowed ? (\n                  <>\n                    <div className=\"mt-2\">\n                      Or you can join as a guest with this link:\n                    </div>\n                    <div className=\"ml-2\">\n                      {createSlugUrlForGuests(meeting.slug)}\n                    </div>\n                  </>\n                ) : null}\n                <p />\n                {meeting.description && (\n                  <>\n                    <div className=\"mt-2\">This meeting will be about:</div>\n                    <div className=\"ml-2\">{meeting.description}</div>\n                  </>\n                )}\n                <p />\n                <div className=\"pt-2\">Yours faithfully,</div>\n                <p />\n                {`${\n                  user && user.username\n                    ? `${user.username} (${auth.user.email})`\n                    : auth.user.email\n                }`}\n              </div>\n            </div>\n\n            {participantDetails && !!participantDetails.length && (\n              <div className=\"p-4 rounded-md border border-width-2 border-opacity-25 break-all\">\n                <div className=\"text-lg italic\">Participants:</div>\n                {participantDetails.map(p => (\n                  <div\n                    key={p.email}\n                    className=\"mt-1 mb-1 p-4 rounded-md border border-width-2 border-opacity-25\"\n                  >\n                    {p.username ? `${p.username} (${p.email})` : p.email}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n      {isLoading && <div>loading...</div>}\n      {fetchError ? <div>Error: {JSON.stringify(fetchError)}</div> : null}\n    </>\n  );\n};\nexport default MeetingDetails;\n","export const LANG_EN = \"en\";\nexport const LANG_EN_GB = \"en-GB\";\nexport const LANG_EN_US = \"en-US\";\nexport const LANG_DE = \"de\";\nexport const LANG_DE_DE = \"de-DE\";\nexport const LANG_DE_AT = \"de-AT\";\nexport const LANG_DE_CH = \"de-CH\";\nexport const LANG_DE_LI = \"de-LI\";\nexport const LANG_DE_LU = \"de-LU\";\nexport const LANG_FR = \"fr\";\nexport const LANG_FR_BE = \"fr-BE\"; // French (Belgium)\nexport const LANG_FR_CA = \"fr-CA\"; // French (Canada)\nexport const LANG_FR_CH = \"fr-CH\"; // French (Switzerland)\nexport const LANG_FR_FR = \"fr-FR\"; // French (France)\nexport const LANG_FR_LU = \"fr-LU\"; // French (Luxembourg)\nexport const LANG_FR_MC = \"fr-MC\"; // French (Principality of Monaco)\n\nexport const LANG_DEFAULT = LANG_EN_GB;\n\nexport const options = [\n  { label: \"English (GB)\", value: LANG_EN_GB },\n  { label: \"English (US)\", value: LANG_EN_US },\n  { label: \"Deutsch\", value: LANG_DE },\n  { label: \"Franais\", value: LANG_FR },\n];\n\nexport const defaultOption = options.find(o => o.value ===LANG_DEFAULT);\n\n","/* eslint-disable */\n\nexport default {\n  application: function(d) { return \"Annolens-EN\"; },\n  login: {\n    info: function(d) { return \"Bitte loggen Sie sich ein, um die Seite \" + d.DEEPLINK + \" zu besuchen.\"; },\n    label: function(d) { return \"Einloggen\"; },\n    welcome: function(d) { return \"Willkommen bei \" + d.BRANDING + \"!\"; }\n  },\n  messages: {\n    create: function(d) { return \"Create\"; }\n  },\n  meetingDetails: {\n    addMeetingButton: function(d) { return \"Fge ein neues Meeting hinzu\"; },\n    editButton: function(d) { return \"ndere Meeting-Details\"; },\n    cancelButton: function(d) { return \"Abbrechen\"; }\n  },\n  profile: {\n    editUserButton: function(d) { return \"Edit user details\"; }\n  }\n}","/* eslint-disable */\n\nexport default {\n  application: function(d) { return \"Annolens-EN\"; },\n  login: {\n    info: function(d) { return \"You must log in to view the page \" + d.DEEPLINK; },\n    label: function(d) { return \"Log in\"; },\n    welcome: function(d) { return \"Welcome to \" + d.BRANDING + \"!\"; }\n  },\n  messages: {\n    create: function(d) { return \"Create\"; }\n  },\n  meetingDetails: {\n    addMeetingButton: function(d) { return \"Add a new meeting\"; },\n    editButton: function(d) { return \"Edit Meeting Details\"; },\n    cancelButton: function(d) { return \"Cancel\"; }\n  },\n  profile: {\n    editUserButton: function(d) { return \"Edit user details\"; },\n    emailChanged: function(d) { return \"Thank you for updating your e-mail address. You will have to validate your e-mail address again, please check the e-mail that should arrive within a few minutes.\"; }\n  },\n  userList: {\n    addUserButton: function(d) { return \"Add user\"; },\n    clearSearch: function(d) { return \"Clear\"; }\n  }\n}","/* eslint-disable */\n\nexport default {\n  application: function(d) { return \"Annolens-FR\"; },\n  login: {\n    info: function(d) { return \"Veuillez connecter pour visiter la page  \" + d.DEEPLINK + \", s'il vous plat.\"; },\n    label: function(d) { return \"Se connecter\"; },\n    welcome: function(d) { return \"Bienvenue  \" + d.BRANDING + \"!\"; }\n  },\n  messages: {\n    create: function(d) { return \"Crer\"; }\n  }\n}","import React, { createContext, useReducer } from \"react\";\nimport * as langs from \"./const.js\";\n\nimport messages_de from \"./messages.de.js\";\nimport messages_en from \"./messages.en.js\";\nimport messages_fr from \"./messages.fr.js\";\n\nconst I18nStateContext = createContext();\nconst I18nDispatchContext = createContext();\n\nconst BROWSER_LANGUAGE =\n  (navigator.languages && navigator.languages[0]) ||\n  navigator.language ||\n  navigator.userLanguage ||\n  langs.LANG_DEFAULT;\n\nconst i18nReducer = (_, lang) => {\n  switch (lang.value) {\n    case langs.LANG_DE:\n    case langs.LANG_DE_DE:\n    case langs.LANG_DE_AT:\n    case langs.LANG_DE_CH:\n    case langs.LANG_DE_LI:\n    case langs.LANG_DE_LU: {\n      return { lang, messages: messages_de };\n    }\n    case langs.LANG_EN:\n    case langs.LANG_EN_US:\n    case langs.LANG_EN_GB: {\n      return { lang, messages: messages_en };\n    }\n    case langs.LANG_FR:\n    case langs.LANG_FR_BE:\n    case langs.LANG_FR_CH: \n    case langs.LANG_FR_FR: \n    case langs.LANG_FR_LU: \n    case langs.LANG_FR_MC: {\n      return { lang, messages: messages_fr };\n    }\n    default: {\n      throw new Error(`Unhandled i18n language: ${JSON.stringify(lang.value)}`);\n    }\n  }\n};\n\nconst defaultState = {\n  lang: BROWSER_LANGUAGE,\n  messages: messages_en\n};\n\nconst I18nProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(i18nReducer, defaultState);\n  return (\n    <I18nStateContext.Provider value={state}>\n      <I18nDispatchContext.Provider value={dispatch}>\n        {children}\n      </I18nDispatchContext.Provider>\n    </I18nStateContext.Provider>\n  );\n};\n\nconst useI18nState = () => {\n  const context = React.useContext(I18nStateContext);\n  if (context === undefined) {\n    throw new Error(\"useI18nState must be used within a I18nProvider\");\n  }\n  return context;\n};\n\nconst useI18nDispatch = () => {\n  const context = React.useContext(I18nDispatchContext);\n  if (context === undefined) {\n    throw new Error(\"useI18nDispatch must be used within a I18nProvider\");\n  }\n  return context;\n};\n\nexport { I18nProvider, I18nStateContext, useI18nState, useI18nDispatch };\n","import React, { useEffect } from \"react\";\nimport * as storage from \"../utils/storage\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { useAuth } from \"./use-auth.js\";\nimport { base64EncodeUnicode } from \"../utils/base64.js\";\nimport Select from \"react-select\";\nimport { useMessageGetter } from \"@messageformat/react\";\nimport { useI18nDispatch } from \"../i18n/use-i18n.js\";\nimport { options as languageOptions, defaultOption } from \"../i18n/const.js\";\nimport Button from \"../components/Button.js\";\n\nconst API_SERVER = process.env.REACT_APP_API_SERVER;\n\nconst BRANDING = process.env.REACT_APP_BRANDING || \"Annolens\";\n\nfunction Login() {\n  let history = useHistory();\n  let location = useLocation();\n  let auth = useAuth();\n  let i18nDispatch = useI18nDispatch();\n  const m = useMessageGetter(\"login\");\n\n  let { from } = location.state || {\n      from: { pathname: location.pathname }\n    } || { from: { pathname: \"/\" } };\n\n  const deepLink =\n    from.pathname && from.pathname !== \"/\"\n      ? base64EncodeUnicode(from.pathname)\n      : \"\";\n\n  const authUrl = deepLink\n    ? `${API_SERVER}/api/auth/login?deepLink=${deepLink}`\n    : `${API_SERVER}/api/auth/login`;\n\n  // browser refresh handling: need to repopulate useAuth from local storage:\n  useEffect(() => {\n    if (!auth.user && storage.local.getItem(\"user\"))\n      auth.updateUser(_ => history.replace(location.pathname));\n  }, [auth, history, location]);\n\n  return auth.user ? null : (\n    <div>\n      <div className=\"p-2 w-48 ml-auto\">\n        <Select\n          width={\"auto\"}\n          defaultValue={defaultOption}\n          onChange={i18nDispatch}\n          options={languageOptions}\n        />\n      </div>\n      <div className=\"flex flex-col h-full justify-between\">\n        <div className=\"py-4\" />\n        <div className=\"text-center text-3xl\">{m(\"welcome\", { BRANDING })}</div>\n        <div className=\"py-4\" />\n        <div className=\"text-center\">\n          <div className=\"text-xs\">\n            {m(\"info\", { DEEPLINK: from.pathname })}\n          </div>\n        </div>\n\n        <div className=\"flex justify-between mt-8\">\n          <div />\n          <a href={authUrl}>\n            <Button \n              colour=\"green\"\n              additionalClass=\"px-16 py-8 w-90\"\n            >\n              {m(\"label\")}\n            </Button>\n          </a>\n          <div />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n","// from https://www.base64encoder.io/javascript/\n// btoa() only accepts 8 bit characters\nexport const base64EncodeUnicode = str => {\n  if (!str) return str;\n\n  // First we escape the string using encodeURIComponent to get the UTF-8 encoding of the characters,\n  // then we convert the percent encodings into raw bytes, and finally feed it to btoa() function.\n  const utf8Bytes = encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function(\n    match,\n    p1\n  ) {\n    return String.fromCharCode(\"0x\" + p1);\n  });\n\n  return btoa(utf8Bytes);\n};\n\nexport const base64DecodeUnicode = str => {\n  if (!str) return str;\n\n  // Convert Base64 encoded bytes to percent-encoding, and then get the original string.\n  const percentEncodedStr = atob(str)\n    .split(\"\")\n    .map(function(c) {\n      return \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2);\n    })\n    .join(\"\");\n\n  return decodeURIComponent(percentEncodedStr);\n};\n","import React, { useEffect } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { base64DecodeUnicode } from \"../utils/base64.js\";\nimport * as storage from \"../utils/storage\";\n\nimport { useAuth } from \"./use-auth.js\";\n\n/**\n * This component gets called by FusionAuth as a callback containing the\n * access_token in the \"code\" query param.\n */\nconst LoginCallback = props => {\n  let history = useHistory();\n  let location = useLocation();\n\n  let auth = useAuth();\n  function useQuery() {\n    return new URLSearchParams(location.search);\n  }\n\n  let query = useQuery();\n  // const userState = query.get(\"userState\");\n\n  useEffect(\n    () => {\n      if (!auth.user && !storage.local.getItem(\"accessToken\")) {\n        const code = query.get(\"code\");\n        const state = base64DecodeUnicode(query.get(\"state\"));\n        auth.signin({ code, state }, state => history.replace(state || \"/\"));\n      }\n    },\n    [auth, history, query]\n  );\n\n  return (\n    <div className=\"flex h-screen items-center justify-center cursor-wait\">\n      <div className=\"text-center text-3xl items-start\">Please wait ...</div>\n    </div>\n  );\n};\n\nexport default LoginCallback;\n","import { useAuth } from \"./use-auth.js\";\n\nconst API_SERVER = process.env.REACT_APP_API_SERVER;\n\nfunction AuthButton() {\n  let auth = useAuth();\n\n  const logoutUrl = `${API_SERVER}/api/auth/logout`;\n\n  const signout = _ =>\n        auth.signout(_ => console.log(\"auth.signout finished\"));\n\n  return auth.user ? (\n    <p>\n      <a href={logoutUrl} onClick={signout}>\n        <button className=\"block w-full h-full text-center shadow-light text-sm uppercase font-extrabold py-6 border-transparent hover:bg-blue-900\">\n          Sign out\n        </button>\n      </a>\n    </p>\n  ) : (\n    <p>You are not logged in.</p>\n  );\n}\n\nexport default AuthButton;\n","import React from \"react\";\nimport { Link, Switch, Route } from \"react-router-dom\";\nimport styles from \"./App.module.scss\";\nimport Sidebar from \"./ui/Sidebar.js\";\nimport Topbar from \"./ui/Topbar.js\";\nimport UserList from \"./components/UserList.js\";\nimport Profile from \"./components/Profile.js\";\nimport MeetingsPage from \"./components/MeetingsPage.js\";\nimport MeetingRedirect from \"./components/MeetingRedirect.js\";\nimport MeetingDetails from \"./components/MeetingDetails.js\";\nimport Login from \"./auth/Login.js\";\nimport LoginCallback from \"./auth/LoginCallback.js\";\nimport Signout from \"./auth/Signout.js\";\nimport { useAuth } from \"./auth/use-auth.js\";\nimport { CUID_REG_STR } from \"./utils/slug.js\";\n\nfunction App() {\n  let auth = useAuth();\n  return !auth.user ? (\n    <Switch>\n      {/* For guests, go directly to holding page */}\n      <Route path={`/m/:slug(${CUID_REG_STR})/guest`}>\n        <MeetingRedirect guestRoute={true} />\n      </Route>\n      <Route path=\"/oauth-callback\">\n        <LoginCallback />\n      </Route>\n      <Route path=\"/\">\n        <Login />\n      </Route>\n    </Switch>\n  ) : (\n    <div className=\"font-sans antialiased h-screen\">\n      <header className=\"z-50 w-full bg-blue-500 shadow flex items-center justify-between\">\n        {/*\n            Home\n           */}\n        <div className=\"flex items-center text-center h-full w-full border-r border-blue-300\">\n          <span className=\"w-full text-white text-sm uppercase font-extrabold\">\n            <Link\n              className=\"block text-center x shadow-light x py-6 border-transparent hover:bg-blue-900\"\n              to=\"/\"\n            >\n              Home\n            </Link>\n          </span>\n        </div>\n\n        <div className=\"flex items-center text-center h-full w-full border-r border-blue-300\">\n          <span className=\"w-full text-white text-sm uppercase font-extrabold\">\n            <Signout />\n          </span>\n        </div>\n\n        {/*\n            Top navigation for small screens\n          */}\n        <div className=\"flex w-full sm:hidden md:hidden lg:hidden xl:hidden\">\n          <Topbar />\n        </div>\n      </header>\n\n      {/*\n        Main Grid\n      */}\n      <div className={styles.Content}>\n        {/*\n          Sidebar\n        */}\n        <aside className=\"hidden sm:block md:block lg:block xl:block\">\n          <div>\n            <Sidebar />\n          </div>\n        </aside>\n\n        {/*\n          Main content area\n        */}\n        <main className=\"border border-blue-300\">\n          <Switch>\n            <Route path=\"/oauth-callback\">\n              <LoginCallback />\n            </Route>\n\n            {/* For non-guests, must go through Login page before redirecting\n            to holding page */}\n            <Route path={`/m/:slug(${CUID_REG_STR})`}>\n              <MeetingRedirect />\n            </Route>\n\n            <Route path={`/meeting/:slug(${CUID_REG_STR})`}>\n              <MeetingDetails />\n            </Route>\n\n            <Route path=\"/user-list\">\n              <UserList />\n            </Route>\n            <Route path=\"/profile\">\n              <Profile />\n            </Route>\n            <Route path=\"/meetings\">\n              <MeetingsPage />\n            </Route>\n\n            <Route path=\"/login\">\n              <Login />\n            </Route>\n\n            {/*\n            <Route path=\"/logout\">\n              <LoggedOut />\n            </Route>\n            */}\n\n            <Route\n              path=\"/\"\n              exact\n              render={_ => (\n                <div className=\"p-16 text-center\">\n                  Select one of the menus on the left or top\n                </div>\n              )}\n            />\n\n            <Route\n              render={routeProps => (\n                <div className=\"bg bg-red-200 p-16 text-center\">\n                  no such page {routeProps.location.pathname}\n                </div>\n              )}\n            />\n          </Switch>\n        </main>\n      </div>\n\n      <footer className=\"border border-blue-300\">Footer</footer>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport App from \"./App\";\nimport { ProvideAuth } from \"./auth/use-auth.js\";\nimport { I18nStateContext, I18nProvider } from \"./i18n/use-i18n.js\";\nimport { MessageProvider } from \"@messageformat/react\";\n\nimport reportWebVitals from \"./reportWebVitals\";\nimport \"./tailwind.output.css\";\n\nconst BASENAME = process.env.REACT_APP_BASENAME || \"/\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <ProvideAuth>\n      <I18nProvider>\n        <I18nStateContext.Consumer>\n          {i18n => (\n            <>\n            <MessageProvider messages={i18n.messages}>\n              <Router basename={BASENAME}>\n                <App />\n              </Router>\n            </MessageProvider>\n            </>\n          )}\n        </I18nStateContext.Consumer>\n      </I18nProvider>\n    </ProvideAuth>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Content\":\"App_Content__LFMSe\"};","\n/*\n * Opens a new tab with the Jitsi-Meet page.\n * Sends a message with the meeting URL so the invite mechanism can use that.\n * Returns true if tab was opened, false if not (e.g. pop-up blocked).\n */\nconst openTab = (url, name = \"_blank\", slugUrl) => {\n  const win = window.open(url, name);\n\n  if (win != null) {\n    win.focus();\n\n    const remoteUrl = new URL(url);\n\n    window.addEventListener(\"message\", event => {\n      if (event.origin !== remoteUrl.origin){\n        return;\n      }\n      if (event.data === \"annolensPortalMeetingSlug|received\"){\n        clearTimeout(intervalId);\n      }\n    }, false);\n\n\n    // send message in regular intervals until other tab is responding\n    const intervalId = setInterval(() => {\n      const message = `annolensPortalMeetingSlug|${slugUrl}`;\n      win.postMessage(message, remoteUrl.origin);\n    }, 1000);\n\n    // after a certain amount of time, we think the other window will never be\n    // ready, so don't send any more messages:\n    setTimeout(() => clearInterval(intervalId), 1000*60);\n\n    return true;\n\n  } else {\n    return false;\n  }\n};\n\nmodule.exports = {\n  openTab\n};\n"],"sourceRoot":""}